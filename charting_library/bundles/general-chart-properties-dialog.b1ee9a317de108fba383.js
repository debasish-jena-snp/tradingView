(window.webpackJsonp=window.webpackJsonp||[]).push([["general-chart-properties-dialog"],{"++0f":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentcolor" stroke-width="1.3" d="M12 9l5 5-5 5"/></svg>'},"2x13":function(e,t,n){e.exports={wrapper:"wrapper-DggvOZTm",container:"container-DggvOZTm",tab:"tab-DggvOZTm",active:"active-DggvOZTm",title:"title-DggvOZTm",icon:"icon-DggvOZTm",titleText:"titleText-DggvOZTm",nested:"nested-DggvOZTm",isTablet:"isTablet-DggvOZTm",isMobile:"isMobile-DggvOZTm"}},An2S:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var o=n("mrSG"),a=n("q1tI"),l=n.n(a),i=n("TSYQ"),r=n.n(i),s=n("Iivm"),c=n("++0f"),m=n("2x13");function u(e){return{isMobile:"mobile"===e,isTablet:"tablet"===e}}function d(e){var t=e.mode,n=e.className,a=Object(o.e)(e,["mode","className"]),i=u(t),s=i.isMobile,c=i.isTablet,d=r()(m.container,c&&m.isTablet,s&&m.isMobile,n);return l.a.createElement("div",Object(o.a)({},a,{className:d,"data-role":"dialog-sidebar"}))}function p(e){return l.a.createElement("div",Object(o.a)({className:m.wrapper},e))}function h(e){var t=e.mode,n=e.title,a=e.icon,i=e.isActive,d=e.onClick,p=Object(o.e)(e,["mode","title","icon","isActive","onClick"]),h=u(t),b=h.isMobile,f=h.isTablet;return l.a.createElement("div",Object(o.a)({},p,{className:r()(m.tab,f&&m.isTablet,b&&m.isMobile,i&&m.active),onClick:d}),l.a.createElement(s.a,{className:m.icon,icon:a}),!f&&l.a.createElement("span",{className:m.title},l.a.createElement("span",{className:m.titleText},n),b&&l.a.createElement(s.a,{className:m.nested,icon:c})))}},Iivm:function(e,t,n){"use strict";var o=n("mrSG"),a=n("q1tI");const l=a.forwardRef((e,t)=>{const{icon:n=""}=e,l=Object(o.e)(e,["icon"]);return a.createElement("span",Object.assign({},l,{ref:t,dangerouslySetInnerHTML:{__html:n}}))});n.d(t,"a",(function(){return l}))},KKsp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI"),a=n("TSYQ"),l=n.n(a),i=n("NOPy");function r(e){var t=e.size,n=void 0===t?"normal":t,a=e.className;return o.createElement("div",{className:l()(i.separator,"small"===n&&i.small,"normal"===n&&i.normal,"large"===n&&i.large,a)})}},NOPy:function(e,t,n){e.exports={separator:"separator-eqcGT_ow",small:"small-eqcGT_ow",normal:"normal-eqcGT_ow",large:"large-eqcGT_ow"}},PI1I:function(e,t,n){"use strict";n.r(t);var o=n("mrSG"),a=(n("YFKU"),n("q1tI")),l=n("i8i4"),i=n("mwqF"),r=n("Iivm"),s=n("bvfV"),c=n("ycFu"),m=n("ybVX"),u=n("Q+1u"),d=n("Vdly"),p=n.n(d),h=n("VNzU"),b=n("/KDZ"),f=(n("bSeV"),n("H172")),g=n("N5tr"),v=n("KKsp"),y=n("EsvI"),_=(n("HbRj"),n("fZEr")),T=window.t("Do you really want to delete Color Theme '{name}' ?");var C=n("+EG+"),S=n("2uTr"),w=(n("EsMY"),n("i/MG")),A=n("JWMC"),k=n("8d0Q"),E=n("utEQ");function P(e){var t=e.themeName,n=e.chartWidgetCollection,l=e.onRemove,i=e.manager,r=Object(k.b)(),s=r[0],c=r[1],m=a.useCallback((function(){return function(e,t,n){
window.is_authenticated&&Object(_.a)({text:T.format({name:e}),onConfirm:function(n){var o=n.dialogClose;Object(y.removeTheme)(e),t&&t(e),o()}},n)}(t,l,i)}),[t,l,i]),u=a.useCallback((function(){Object(y.loadTheme)(t,!1,!1,n).then((function(){window.saver.saveChartSilently(),Object(A.trackEvent)("GUI","Switch to custom theme")}))}),[t,n]);return a.createElement("div",Object(o.a)({},c),a.createElement(g.b,{className:E.defaultsButtonItem,isActive:!1,label:t,onClick:u,toolbox:a.createElement(w.a,{hidden:!Modernizr.mobiletouch&&!s,onClick:m})}))}var I=n("HWhk"),O=window.t("Template"),B=window.t("Apply Defaults"),D=(Object(S.appendEllipsis)(window.t("Save As")),window.t("Apply to all")),N=function(e){function t(t){var n=e.call(this,t)||this;return n._manager=null,n._handleApplyDefaults=function(){var e=n.props,t=e.model,o=e.chartWidgetCollection;t.restorePreferences();var a=Object(y.getCurrentTheme)().name;Object(y.loadTheme)(a,!0,!0,o,void 0,void 0,!0)},n._handleSaveAs=function(){},n._handleRemoveTheme=function(e){n.setState({themes:n.state.themes.filter((function(t){return t!==e}))})},n._syncThemeList=function(){0},n._defaultDropdownItems=[{value:"apply",readonly:!0,content:a.createElement(g.b,{className:E.defaultsButtonItem,isActive:!1,label:B,onClick:n._handleApplyDefaults})}],n._applyToAllDropdownItem={value:"apply_to_all",readonly:!0,content:a.createElement(g.b,{className:E.defaultsButtonItem,isActive:!1,label:D,onClick:t.applyToAllCallback})},n.state={themes:[]},n._syncThemeList(),n}return Object(o.c)(t,e),t.prototype.render=function(){var e=this;return a.createElement(C.b.Consumer,null,(function(t){return e._manager=t,a.createElement(b.a,{rule:"screen and (max-width: 768px)"},(function(t){return a.createElement(f.a,{className:!t&&E.themesButtonText,items:e._getThemeItems(t),hideArrowButton:t,value:"defaults","data-name":"theme-select"})}))}))},t.prototype._getThemeItems=function(e){var t=this,n=this.props,l=n.isApplyToAllVisible,i=n.chartWidgetCollection,r=e&&l?Object(o.f)([this._applyToAllDropdownItem,this._getPlaceHolderItem(e)],this._defaultDropdownItems):Object(o.f)([this._getPlaceHolderItem(e)],this._defaultDropdownItems),s=this.state.themes;if(!s.length)return r;var c=s.map((function(e){return{value:e,readonly:!0,content:a.createElement(P,{themeName:e,onRemove:t._handleRemoveTheme,chartWidgetCollection:i,manager:t._manager})}}));return c.unshift({readonly:!0,content:a.createElement(v.a,null)}),r.concat(c)},t.prototype._getPlaceHolderItem=function(e){return{value:"defaults",readonly:!0,content:"",selectedContent:e?a.createElement(r.a,{className:E.themesButtonIcon,icon:I}):O}},t}(a.PureComponent),x=n("tWVy"),M=n("yqnI"),j=n("uhCe"),z=n("An2S"),W=n("tmL0"),L={areaSymbolMinTick:"normal",areaSymbolTimezone:"normal",barSymbolMinTick:"normal",barSymbolTimezone:"normal",baselineSymbolMinTick:"normal",baselineSymbolTimezone:"normal",candleSymbolMinTick:"normal",candleSymbolTimezone:"normal",dateFormat:"normal",haSymbolMinTick:"normal",haSymbolTimezone:"normal",hiloSymbolMinTick:"normal",hiloSymbolTimezone:"normal",
hollowCandleSymbolMinTick:"normal",hollowCandleSymbolTimezone:"normal",kagiAtrLength:"normal",kagiReversalAmount:"normal",kagiStyle:"normal",kagiSymbolMinTick:"normal",kagiSymbolTimezone:"normal",lineSymbolMinTick:"normal",lineSymbolTimezone:"normal",lockScale:"normal",mainSeriesSymbolAreaPriceSource:"normal",mainSeriesSymbolBaseLevelPercentage:"normal",mainSeriesSymbolBaseLinePriceSource:"normal",mainSeriesSymbolLinePriceSource:"normal",mainSeriesSymbolStyleType:"normal",navButtons:"big",paneButtons:"big",pbLb:"normal",pbSymbolMinTick:"normal",pbSymbolTimezone:"normal",pnfAtrLength:"normal",pnfBoxSize:"normal",pnfReversalAmount:"normal",pnfSources:"normal",pnfStyle:"normal",pnfSymbolMinTick:"normal",pnfSymbolTimezone:"normal",rangeSymbolMinTick:"normal",rangeSymbolTimezone:"normal",renkoAtrLength:"normal",renkoBoxSize:"normal",renkoStyle:"normal",renkoSymbolMinTick:"normal",renkoSymbolTimezone:"normal",scalesPlacement:"normal",symbolLastValueLabel:"big",symbolTextSource:"normal"},V=n("U0JK"),R=n("sXZi"),q=function(e){function t(t){var n=e.call(this,t)||this;n._renderChildren=function(e){var t=e.requestResize,o=e.isSmallWidth;return n._requestResize=t,a.createElement("div",{className:R.content},n._renderTabs(o),n._renderTabContent(o))},n._renderApplyToAllButton=function(){return a.createElement(b.a,{rule:j.a.TabletNormal},(function(e){return n._renderApplyToAll(e)}))},n._renderFooterLeft=function(){var e=n.props,t=e.model,o=e.chartWidgetCollection,l=n.state.isApplyToAllVisible;return a.createElement(N,{model:t,isApplyToAllVisible:l,applyToAllCallback:n._handleApplyToAll,chartWidgetCollection:o})},n._createTabClickHandler=function(e){return function(){return n._selectPage(e)}},n._selectPage=function(e){var t=n.state.activePage;e!==t&&(t&&t.definitions.unsubscribe(n._onChangeActivePageDefinitions),p.a.setValue("properties_dialog.last_page_id",e.id),e.definitions.subscribe(n._onChangeActivePageDefinitions),n.setState({activePage:e,tableKey:Date.now()},(function(){n._requestResize&&n._requestResize()})))},n._onChangeActivePageDefinitions=function(){M.a.logNormal("Definition collection was updated"),n.setState({tableKey:Date.now()},(function(){n._requestResize&&n._requestResize()}))},n._handleCancel=function(){n.props.onCancel(),n.props.onClose()},n._handleSubmit=function(){n.props.onSubmit(),n.props.onClose()},n._handleScroll=function(){x.a.fire()},n._handleApplyToAll=function(){var e=n.props,t=e.chartWidgetCollection,o=e.model;n.state.isApplyToAllVisible&&t.applyPreferencesToAllCharts(o)},n._syncApplyToAllVisibility=function(){var e=n.props.chartWidgetCollection;n.setState({isApplyToAllVisible:Object(h.isMultipleLayout)(e.layout.value())})},n._handleBackClick=function(){var e=n.state.activePage;e&&e.definitions.unsubscribe(n._onChangeActivePageDefinitions),n.setState({activePage:null})};var o=t.pages,l=t.activePageId,i=o.find((function(e){return e.id===l}));if(!i){var r=p.a.getValue("properties_dialog.last_page_id"),s=o.find((function(e){return e.id===r}));i=s||o[0]}return n.state={activePage:i,
isApplyToAllVisible:Object(h.isMultipleLayout)(t.chartWidgetCollection.layout.value()),tableKey:Date.now()},n}return Object(o.c)(t,e),t.prototype.componentDidMount=function(){var e=this.props.chartWidgetCollection,t=this.state.activePage;e.layout.subscribe(this._syncApplyToAllVisibility),t&&t.definitions.subscribe(this._onChangeActivePageDefinitions)},t.prototype.componentWillUnmount=function(){var e=this.props.chartWidgetCollection,t=this.state.activePage;t&&t.definitions.unsubscribe(this._onChangeActivePageDefinitions),e.layout.unsubscribe(this._syncApplyToAllVisibility)},t.prototype.render=function(){var e=this,t=this.props,n=t.isOpened,o=t.onClose,l=this.state.activePage;return a.createElement(b.a,{rule:j.a.TabletSmall},(function(t){return a.createElement(c.a,{className:R.withSidebar,dataName:"series-properties-dialog",onClose:o,isOpened:n,title:null!==l&&t?l.title:window.t("Chart settings"),footerLeftRenderer:e._renderFooterLeft,additionalButtons:e._renderApplyToAllButton(),additionalHeaderElement:null!==l&&t?a.createElement(r.a,{className:R.backButton,icon:V,onClick:e._handleBackClick}):void 0,onSubmit:e._handleSubmit,onCancel:e._handleCancel,render:e._renderChildren,submitOnEnterKey:!1})}))},t.prototype._renderTabContent=function(e){var t=this.props.pages,n=this._getCurrentPage(e);if(n){var o=t.find((function(e){return e.id===n.id})),l=o?o.definitions.value():[];return a.createElement(W.a,{className:R.tabContent,onScroll:this._handleScroll},a.createElement(m.b.Provider,{value:L},a.createElement(u.a,{key:this.state.tableKey},l.map((function(e){return a.createElement(s.a,{key:e.id,definition:e})})))))}return null},t.prototype._renderTabs=function(e){var t=this,n=this.props.pages;if(this.state.activePage&&e)return null;var o=this._getCurrentPage(e);return a.createElement(b.a,{rule:j.a.TabletNormal},(function(e){return a.createElement(b.a,{rule:j.a.TabletSmall},(function(l){var i=l?"mobile":e?"tablet":void 0;return a.createElement(z.a,{mode:i,onScroll:t._handleScroll},n.map((function(e){return a.createElement(z.b,{key:e.id,mode:i,"data-name":e.id,title:e.title,icon:e.icon,onClick:t._createTabClickHandler(e),isActive:o?e.id===o.id:void 0})})))}))}))},t.prototype._renderApplyToAll=function(e){var t=this.state.isApplyToAllVisible;return!e&&t&&a.createElement("span",{className:R.applyToAllButton},a.createElement(i.a,{appearance:"stroke",onClick:this._handleApplyToAll},window.t("Apply to all")))},t.prototype._getCurrentPage=function(e){var t=this.props.pages,n=this.state.activePage,o=null;return n?o=n:!e&&t.length&&(o=t[0]),o},t}(a.PureComponent),Z=n("FQhm"),K=n("sQaR");n.d(t,"GeneralChartPropertiesDialogRenderer",(function(){return G}));var U=window.t("Chart settings"),G=function(e){function t(t){var n=e.call(this)||this;return n._handleClose=function(){l.unmountComponentAtNode(n._container),n._setVisibility(!1),n._onClose&&n._onClose()},n._handleSubmit=function(){},n._handleCancel=function(){n._model.undoToCheckpoint(n._checkpoint)},n._propertyPages=t.propertyPages,n._model=t.model,n._activePageId=t.activePageId,
n._onClose=t.onClose,n._chartWidgetCollection=t.chartWidgetCollection,n._checkpoint=n._ensureCheckpoint(t.undoCheckPoint),n}return Object(o.c)(t,e),t.prototype.hide=function(e){e?this._handleCancel():this._handleSubmit(),this._handleClose()},t.prototype.isVisible=function(){return this.visible().value()},t.prototype.show=function(){l.render(a.createElement(q,{title:U,isOpened:!0,onSubmit:this._handleSubmit,onClose:this._handleClose,onCancel:this._handleCancel,pages:this._propertyPages,model:this._model,activePageId:this._activePageId,chartWidgetCollection:this._chartWidgetCollection}),this._container),this._setVisibility(!0),Z.emit("edit_object_dialog",{objectType:"mainSeries",scriptTitle:this._model.mainSeries().title()})},t.prototype._ensureCheckpoint=function(e){return void 0===e&&(e=this._model.createUndoCheckpoint()),e},t}(K.a)},U0JK:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentcolor" stroke-width="1.2" d="M17 21l-7.5-7.5L17 6"/></svg>'},sXZi:function(e,t,n){e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","tablet-small-breakpoint":"screen and (max-width: 419px)",withSidebar:"withSidebar-1e-cIUlp",content:"content-1e-cIUlp",tabContent:"tabContent-1e-cIUlp",backButton:"backButton-1e-cIUlp",applyToAllButton:"applyToAllButton-1e-cIUlp"}},utEQ:function(e,t,n){e.exports={themesButtonText:"themesButtonText-3vn5WLwC",themesButtonIcon:"themesButtonIcon-3vn5WLwC",defaultsButtonText:"defaultsButtonText-3vn5WLwC",defaultsButtonItem:"defaultsButtonItem-3vn5WLwC"}}}]);