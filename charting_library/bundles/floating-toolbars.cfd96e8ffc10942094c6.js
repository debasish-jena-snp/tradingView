(window.webpackJsonp=window.webpackJsonp||[]).push([["floating-toolbars"],{"+KIV":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M8 9.5H6.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V20m-8-1.5h11a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1z"/></svg>'},"+l/S":function(t,e,o){},"0ZwQ":function(t,e,o){"use strict";var i=o("P5fv"),n=o.n(i),r=(o("EsMY"),o("Eyy1")),s=o("9uLv"),a=o("Vdly"),l=o("aIyQ"),c=o.n(l),d=o("hY0g"),u=o.n(d),p=o("A6WY"),h=o("mrSG"),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.c)(e,t),e.prototype._startLoading=function(){return o.e("hammerjs").then(o.bind(null,"be1f")).then((function(t){return t.HammerJS}))},e}(o("cZRT").a),_=o("qFKp"),f=o("VVxS"),m=o("qAO1");o("PwLo");o.d(e,"a",(function(){return C})),o.d(e,"b",(function(){return P}));var v=_.CheckMobile.iOS();function y(){return Object(r.ensureNotNull)(window.containerElement)}function b(){if(!v)return window.innerWidth;var t=y(),e=getComputedStyle(t),o=e.paddingLeft&&parseFloat(e.paddingLeft)||0,i=e.paddingRight&&parseFloat(e.paddingRight)||0;return t.clientWidth-o-i}function w(){if(!v)return window.innerHeight;var t=y(),e=getComputedStyle(t),o=e.paddingTop&&parseFloat(e.paddingTop)||0,i=e.paddingBottom&&parseFloat(e.paddingBottom)||0;return t.clientHeight-o-i}var C="floating-toolbar-react-widgets",W='<div class="tv-floating-toolbar i-closed i-hidden">'+(Modernizr.mobiletouch?'<div class="tv-floating-toolbar__drag-ext js-drag"></div>':"")+'<div class="tv-floating-toolbar__widget-wrapper"><div class="tv-floating-toolbar__drag js-drag">'+m+'</div><div class="tv-floating-toolbar__content js-content"></div><div class="'+C+'"></div></div></div>',P=function(){function t(e){this._widget=document.createElement("div"),this._isVertical=!1,this._hiddingTimeoutId=null,this._visibility=new u.a(!1),this._windowResizeListener=this._onWindowResize.bind(this),this._reorderedDelegate=new c.a,this._responsiveResizeFunction=null,t._toolbars.push(this),this._options=e,this._widget=n()(W).get(0),this._content=this._widget.getElementsByClassName("js-content").item(0),this._reactWidgetsContainer=this._widget.getElementsByClassName(C).item(0),this._setZIndex(t._startZIndex+t._toolbars.length-1),this._options.addClass&&(this._widget.className+=" "+this._options.addClass),this._options["data-name"]&&(this._widget.dataset.name=this._options["data-name"]),this._options.layout&&"auto"!==this._options.layout&&(this._isVertical="vertical"===this._options.layout,this._updateLayoutType(),this._updateAxisOption())}return t.prototype.destroy=function(){this.hide(!0),t._toolbars.splice(t._toolbars.indexOf(this),1),document.body.contains(this._widget)&&document.body.removeChild(this._widget),this._widget.innerHTML="",this._responsiveResizeFunction=null},t.prototype.setResponsiveResizeFunc=function(t){this._responsiveResizeFunction=t},t.prototype.isVisible=function(){return this._visibility.value()},t.prototype.visibility=function(){
return this._visibility.readonly()},t.prototype.isVertical=function(){return this._isVertical},t.prototype.show=function(){var t=this;this.isVisible()||(document.body.contains(this._widget)||(this._init(),document.body.appendChild(this._widget)),this._setHiddingTimeout(null),window.addEventListener("resize",this._windowResizeListener),this.raise(),this._visibility.setValue(!0),this._widget.classList.contains("i-hidden")?(this._widget.classList.remove("i-hidden"),setTimeout((function(){t.isVisible()&&t._widget.classList.remove("i-closed")}))):this._widget.classList.remove("i-closed"),this._onWindowResize())},t.prototype.hide=function(t){var e=this;if(void 0===t&&(t=!1),this.isVisible()){var o=this._widget.classList.contains("i-closed");if(this._widget.classList.add("i-closed"),this._visibility.setValue(!1),t||o)this._setHiddingTimeout(null),this._widget.classList.add("i-hidden");else{var i=setTimeout((function(){e._setHiddingTimeout(null),e._widget.classList.add("i-hidden")}),this.hideDuration());this._setHiddingTimeout(i)}window.removeEventListener("resize",this._windowResizeListener)}},t.prototype.raise=function(){t._toolbars.length+t._startZIndex!==this._zIndex()&&(t._toolbars.splice(t._toolbars.indexOf(this),1),t._toolbars.push(this),t._updateAllZIndexes())},t.prototype.hideDuration=function(){return.75*s.dur},t.prototype.addWidget=function(t,e){void 0===e&&(e={});var o=this.widgetsCount();if(void 0===e.index&&(e.index=o),e.index<0||e.index>o)throw new Error("Index must be in [0, "+o+"]");var i=document.createElement("div");i.className="tv-floating-toolbar__widget js-widget",i.appendChild(t);var n=e.index===o?null:this._content.childNodes.item(e.index);this._content.insertBefore(i,n),this._onWindowResize()},t.prototype.getReactWidgetContainer=function(){return this._reactWidgetsContainer},t.prototype.removeWidget=function(t){var e=this._findWrapperForWidget(t);e&&(this._content.removeChild(e),this._onWindowResize())},t.prototype.widgetsCount=function(){return this._content.childNodes.length},t.prototype.showWidget=function(t){var e=this._findWrapperForWidget(t);e&&e.classList.remove("i-hidden")},t.prototype.hideWidget=function(t){var e=this._findWrapperForWidget(t);e&&e.classList.add("i-hidden")},t.prototype.removeWidgets=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._onWindowResize()},t.prototype.onWidgetsReordered=function(){return this._reorderedDelegate},t.prototype.onContextMenu=function(t){var e=this;Modernizr.mobiletouch?(new g).load().then((function(o){var i=new o(e._widget);i.get("press").set({time:500}),i.on("press",(function(o){e._preventWidgetTouchEndEvent(),t(o.srcEvent)}))})):this._widget.addEventListener("contextmenu",t)},t.prototype.checkPosition=function(){var t=this._getCorrectedWidgetRect(),e={left:t.left,top:t.top};this._correctPosition(e),t.left===e.left&&t.top===e.top||(this._widget.style.left=e.left+"px",this._widget.style.top=e.top+"px")},t.prototype._determineCurrentLayoutVertical=function(t){var e=this._isVertical?t.height:t.width
;return b()<e},t.prototype._getWidget=function(){return this._widget},t.prototype._findWrapperForWidget=function(t){for(var e=this._content.getElementsByClassName("js-widget"),o=0;o<e.length;++o){var i=e.item(o);if(i.contains(t))return i}return null},t.prototype._onVerticalChanged=function(t,e){},t.prototype._setHiddingTimeout=function(t){null!==this._hiddingTimeoutId&&clearTimeout(this._hiddingTimeoutId),this._hiddingTimeoutId=t},t.prototype._preventWidgetTouchEndEvent=function(){var t=this,e=function(o){o.preventDefault(),t._widget.removeEventListener("touchend",e)};this._widget.addEventListener("touchend",e)},t.prototype._updateLayoutType=function(){this._widget.classList.toggle("i-vertical",this._isVertical)},t.prototype._updateAxisOption=function(){if(this._options.dragOnlyInsideToolbar){var t=this._isVertical?"y":"x";Object(p.lazyJqueryUI)(n()(this._content)).sortable("option","axis",t)}},t.prototype._onWindowResize=function(){if("auto"===(this._options.layout||"auto")){var t=this._isVertical,e=this._getCorrectedWidgetRect();this._isVertical=this._determineCurrentLayoutVertical(e),this._updateLayoutType(),t!==this._isVertical&&(this._onVerticalChanged(this._isVertical,t),this._updateAxisOption())}this.checkPosition(),this._resizeResponsive()},t.prototype._resizeResponsive=function(){if(null!==this._responsiveResizeFunction){var t=this._options.layout||"auto";"auto"===t&&(t=this._isVertical?"vertical":"horizontal");var e="vertical"===t?this._widget.clientHeight:this._widget.clientWidth,o=("vertical"===t?w():b())-e;this._responsiveResizeFunction(e,o,t)}},t.prototype._correctPosition=function(t){var e=this._getCorrectedWidgetRect();t.left+e.width>b()&&(t.left=Math.max(0,b()-e.width)),t.top+e.height>w()&&(t.top=Math.max(0,w()-e.height)),t.left=Math.max(0,t.left),t.top=Math.max(0,t.top)},t.prototype._setZIndex=function(t){this._widget.style.zIndex=String(t)},t.prototype._zIndex=function(){return Number(this._widget.style.zIndex)},t.prototype._loadPosition=function(){var t;if("device"===this._options.positionStorageType){var e=f.TVLocalStorage.getItem(this._options.positionSettingsKey);t=null!==e?JSON.parse(e):this._options.defaultPosition}else t=Object(a.getJSON)(this._options.positionSettingsKey,this._options.defaultPosition);this._widget.style.left=Math.round(t.left)+"px",this._widget.style.top=Math.round(t.top)+"px",this._onWindowResize()},t.prototype._savePosition=function(){var t=this._widget.getBoundingClientRect();if("device"===this._options.positionStorageType)try{f.TVLocalStorage.setItem(this._options.positionSettingsKey,JSON.stringify({left:t.left,top:t.top}))}catch(e){}else Object(a.setJSON)(this._options.positionSettingsKey,{left:t.left,top:t.top})},t.prototype._init=function(){this._loadPosition(),Object(p.lazyJqueryUI)(n()(this._widget)).draggable({containment:"window",drag:this._onDragEvent.bind(this),handle:".js-drag",stop:this._savePosition.bind(this)}),this._options.allowSortable&&this._initSortable(),
this._widget.addEventListener(Modernizr.mobiletouch?"touchstart":"mousedown",this.raise.bind(this))},t.prototype._onDragEvent=function(t,e){this._correctPosition(e.position)},t.prototype._initSortable=function(){var t=this,e=-1;Object(p.lazyJqueryUI)(n()(this._content)).sortable({start:function(t,o){e=o.item.index()},stop:function(o,i){var n=i.item.index();e!==n&&t._reorderedDelegate.fire(e,n)},tolerance:"pointer",distance:5,containment:!!this._options.dragOnlyInsideToolbar&&"parent",scroll:!1,placeholder:"sortable-placeholder",forcePlaceholderSize:!0}),this._updateAxisOption()},t.prototype._getCorrectedWidgetRect=function(){var t=this._widget.getBoundingClientRect();if(this._widget.classList.contains("i-closed")){var e=t.width*(1/.925-1),o=t.height*(1/.925-1);return{bottom:t.bottom+o/2,height:t.height+o,left:t.left-e/2,right:t.right+e/2,top:t.top-o/2,width:t.width+e}}return t},t._updateAllZIndexes=function(){t._toolbars.forEach((function(e,o){e._setZIndex(t._startZIndex+o)}))},t._startZIndex=20,t._toolbars=[],t}()},"0fuu":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" fill="none"><path stroke="currentColor" d="M13.5 6.5l-3-3-7 7 7.59 7.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82L13.5 6.5zm0 0v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v6"/><path fill="currentColor" d="M0 16.5C0 15 2.5 12 2.5 12S5 15 5 16.5 4 19 2.5 19 0 18 0 16.5z"/><circle fill="currentColor" cx="9.5" cy="9.5" r="1.5"/></svg>'},"2A9e":function(t){t.exports=JSON.parse('{"button":"button-1iktpaT1","content":"content-2PGssb8d","noOutline":"noOutline-d9Yp4qvi","appearance-default":"appearance-default-dMjF_2Hu","intent-primary":"intent-primary-1-IOYcbg","intent-success":"intent-success-25a4XZXM","intent-default":"intent-default-2ZbSqQDs","intent-warning":"intent-warning-24j5HMi0","intent-danger":"intent-danger-1EETHCla","appearance-stroke":"appearance-stroke-12lxiUSM","appearance-text":"appearance-text-DqKJVT3U","appearance-inverse":"appearance-inverse-r1Y2JQg_","size-s":"size-s-3mait84m","size-m":"size-m-2G7L7Qat","size-l":"size-l-2NEs9_xt","size-p":"size-p-3D4rn3v0","full-width":"full-width-1wU8ljjC","with-icon":"with-icon-yumghDr-","icon":"icon-1grlgNdV"}')},"2F1E":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 4" width="18" height="4"><rect width="18" height="4" fill="currentColor" rx="2"/></svg>'},"5hRh":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var i=o("q1tI"),n=function(t){var e=Object(i.useState)(t.value()),o=e[0],n=e[1];return Object(i.useEffect)((function(){var e=function(t){n(t.value())};e(t);var o={};return t.subscribe(o,e),function(){return t.unsubscribe(o,e)}}),[t]),o}},ADFN:function(t,e,o){},EvtC:function(t,e,o){t.exports={button:"button-2YcRd2gv"}},HWhk:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fillRule="evenodd" clipRule="evenodd" d="M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM19 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"/></svg>'},IhRv:function(t,e,o){"use strict";o.r(e),o.d(e,"ColorPickerButton",(function(){return m}));var i=o("q1tI"),n=o.n(i),r=o("TSYQ"),s=o.n(r),a=o("Eyy1"),l=o("Iivm"),c=o("eJTA"),d=o("Tmoa"),u=o("V3OP"),p=o("htM8"),h=o("wLjq"),g=o("82wv"),_=o("5hRh"),f=o("X1vi");function m(t){var e=t.property,o=t.icon,r=t.model,m=t.title,v=t.className,y=Object(_.a)(e),b=Object(i.useRef)(null),w=y?Object(c.parseRgba)(y)[3]:void 0,C=""===y,W=String(B()).toLowerCase()===h.c,P=Object(u.a)(),x=P[0],S=P[1],T=P[2];return n.a.createElement(g.a,{className:v,content:n.a.createElement("div",{className:f.wrap},n.a.createElement(l.a,{className:f.icon,icon:o}),n.a.createElement("div",{className:f.colorBg},n.a.createElement("div",{className:s()(f.color,C&&f.multicolor,W&&f.white),style:C?void 0:{backgroundColor:y}}))),arrow:!1,title:m,ref:b,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement(p.a,{color:B(),opacity:w,onColorChange:function(t,e){var o=y?Object(d.alphaToTransparency)(Object(c.parseRgba)(y)[3]):0;E(Object(d["generateColor"])(String(t),o,true)),e||Object(a.ensureNotNull)(b.current).close()},onOpacityChange:function(t){E(Object(d.generateColor)(y,Object(d.alphaToTransparency)(t),!0))},selectOpacity:void 0!==w,selectCustom:!0,customColors:x,onAddColor:function(t){S(t),Object(a.ensureNotNull)(b.current).close()},onRemoveCustomColor:T}));function B(){return y?Object(c.rgbToHexString)(Object(c.parseRgb)(y)):null}function E(t){r.setProperty(e,t,m)}}},Lnv9:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="currentColor"><rect width="18" height="2" rx="1" x="5" y="14"/><rect width="18" height="1" rx=".5" x="5" y="20"/><rect width="18" height="3" rx="1.5" x="5" y="7"/></svg>'},O5Oz:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 1" width="18" height="1"><rect width="18" height="1" fill="currentColor" rx=".5"/></svg>'},PwLo:function(t,e,o){},TXAa:function(t,e,o){},UXdH:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentColor" d="M4 13h5v1H4v-1zM12 13h5v1h-5v-1zM20 13h5v1h-5v-1z"/></svg>'},Ve4Q:function(t,e,o){"use strict";o.r(e);var i=o("q1tI"),n=o.n(i),r=o("i8i4"),s=o.n(r),a=o("YFKU"),l=o("Kxc7"),c=o("hY0g"),d=o.n(c),u=o("ogJP"),p=o("CW80"),h=o("mMWL"),g=o("j3hX"),_=o("mrSG"),f=o("Eyy1"),m=o("tc+8"),v=function(t){function e(e,o,i){var n=t.call(this)||this;return n._listenersMappers=[],n._isProcess=!1,n._baseProperty=e,n._undoModel=o,n._undoText=i,n}return Object(_.c)(e,t),e.prototype.destroy=function(){this._baseProperty.destroy()},
e.prototype.value=function(){return this._baseProperty.value()},e.prototype.setValue=function(t){var e=this;this._isProcess=!0,this._baseProperty.setValue(t,void 0,{applyValue:function(t,o){return e._undoModel.setProperty(t,o,e._undoText)}}),this._isProcess=!1,this._listenersMappers.forEach((function(t){t.method.call(t.obj,e)}))},e.prototype.subscribe=function(t,e){var o=this,i=function(i){o._isProcess||e.call(t,o)},n={obj:t,method:e,callback:i};this._listenersMappers.push(n),this._baseProperty.subscribe(t,i)},e.prototype.unsubscribe=function(t,e){var o,i=Object(f.ensureDefined)(null===(o=this._listenersMappers.find((function(o){return o.obj===t&&o.method===e})))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(t,i)},e.prototype.unsubscribeAll=function(t){this._baseProperty.unsubscribeAll(t)},e}(o.n(m).a),y=o("turx"),b=o("rzV7"),w=o.n(b),C=function(t){function e(e){var o=t.call(this,e)||this;o._handleMediaChange=function(){var t=P(o.state.queries,(function(t,e){return e.matches})),e=!1;for(var i in t)if(t.hasOwnProperty(i)&&o.state.matches[i]!==t[i]){e=!0;break}e&&o.setState({matches:t})};var i=o.props.rules;return o.state=W(i),o}return Object(_.c)(e,t),e.prototype.shouldComponentUpdate=function(t,e){return!w()(t,this.props)||(!w()(e.rules,this.state.rules)||!w()(e.matches,this.state.matches))},e.prototype.componentDidMount=function(){this._migrate(null,this.state.queries)},e.prototype.componentDidUpdate=function(t,e){w()(t.rules,this.props.rules)||this._migrate(e.queries,this.state.queries)},e.prototype.componentWillUnmount=function(){this._migrate(this.state.queries,null)},e.prototype.render=function(){return this.props.children(this.state.matches)},e.getDerivedStateFromProps=function(t,e){return w()(t.rules,e.rules)?null:W(t.rules)},e.prototype._migrate=function(t,e){var o=this;null!==t&&P(t,(function(t,e){e.removeListener(o._handleMediaChange)})),null!==e&&P(e,(function(t,e){e.addListener(o._handleMediaChange)}))},e}(i.Component);function W(t){var e=P(t,(function(t,e){return window.matchMedia(e)}));return{queries:e,matches:P(e,(function(t,e){return e.matches})),rules:Object(_.a)({},t)}}function P(t,e){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=e(i,t[i]));return o}var x=o("0ZwQ"),S=o("uhCe"),T=x.a+"__button";function B(t){var e,o=t.templateButton,i=t.propertyButtons,r=t.commonButtons,s=t.isDrawingFinished,a=null===(e=t.activeChartWidget.model())||void 0===e?void 0:e.selection().dataSources();return a&&a.length?n.a.createElement(C,{rules:{isSmallWidth:S.a.TabletSmall,isSmallHeight:"screen and (max-height: 419px)"}},(function(t){var e=t.isSmallWidth,o=t.isSmallHeight;return n.a.createElement(n.a.Fragment,null,l(),s&&n.a.createElement(n.a.Fragment,null,Boolean(i.length)&&i.map((function(t,i){return n.a.createElement(t.component,Object(_.a)({},t.props,{key:t.props.title+"_"+i,className:T,isSmallScreen:e||o}))})),Boolean(r.length)&&r.map((function(t,i){var r=e||o;return r?t.showForSmallScreen?n.a.createElement(t.component,Object(_.a)({},t.props,{isSmallScreen:r,key:t.props.title+"_"+i,className:T
})):null:n.a.createElement(t.component,Object(_.a)({},t.props,{key:t.props.title+"_"+i,className:T}))}))))})):l();function l(){return null===o?null:n.a.createElement(o.component,Object(_.a)({},o.props,{isDrawingFinished:s,className:T}))}}var E=o("JWMC"),k=o("p0W+"),L=o("Xxuz");function O(t){var e=t.title,o=t.activeChartWidget,i=t.className;return n.a.createElement(k.a,{className:i,icon:L,title:e,onClick:function(){Object(E.trackEvent)("GUI","Context action on drawings","Settings"),o.showChartPropertiesForSource(o.model().selection().lineDataSources()[0],void 0,{onWidget:o.onWidget()})},"data-name":"settings"})}var j=o("5hRh"),N=o("TSYQ"),V=o("4rU7"),M=o("ucyy");function I(t){var e=t.className,o=Object(_.e)(t,["className"]);return n.a.createElement(V.a,Object(_.a)({className:N(e,M.button),tooltipPosition:"horizontal"},o))}var z=o("43BO"),R=o("Uh5y");function F(t){var e=t.activeChartWidget,o=t.className,i=e.model().selection().lineDataSources()[0].properties().frozen,r=Object(j.a)(i),s=r?{title:Object(a.t)("Unlock"),icon:z}:{title:Object(a.t)("Lock"),icon:R};return n.a.createElement(I,Object(_.a)({className:o,isActive:Boolean(r),onClick:function(){Object(E.trackEvent)("GUI","Context action on drawings","Lock"),e.toggleLockSelectedObject()},"data-name":Boolean(r)?"unlock":"lock"},s))}var A=o("aVjL");function D(t){var e=t.title,o=t.activeChartWidget,i=t.className;return n.a.createElement(k.a,{className:i,icon:A,title:e,"data-name":"remove",onClick:function(){Object(E.trackEvent)("GUI","Context action on drawings","Remove"),o.removeSelectedSources()}})}var H=o("Iivm"),G=o("/3z9"),Q=o("lxNp"),U=o("82wv"),q=o("IAAr"),$=o("7KDR"),Z=o("ycI/"),K=o("5VQP"),Y=o("HZKX"),J=o("HWhk"),X=o("9dnG"),tt=o("dmHa");function et(t){var e=t.title,r=t.activeChartWidget,s=t.isSmallScreen,l=t.className,c=r.model(),d=c.selection().lineDataSources(),u=Object(i.useState)([]),p=u[0],h=u[1],g=Object(i.useRef)(null),m=Object(i.useMemo)((function(){return new Y.ActionsProvider(r)}),[r]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Z.a,{keyCode:27,eventType:"keyup",handler:function(){Object(f.ensureNotNull)(g.current).close()}}),n.a.createElement(U.a,{className:l,ref:g,arrow:!1,onOpen:s?void 0:function(){var t=[new $.Action({label:Object(a.t)("Visual order"),icon:X,subItems:v(),name:"visual-order"})],e=function(){var t=[],e=G.isMacKeyboard?" +":"",i=d.filter((function(t){return t.cloneable()}));i.length>0&&t.push(new $.Action({name:"clone",icon:o("+KIV"),shortcutHint:G.humanReadableModifiers(Q.Modifiers.Mod)+e+" Drag",label:Object(a.t)("Clone"),onExecute:function(){c.cloneLineTools(i,!1),Object(E.trackEvent)("GUI","Context action on drawings","Clone")}}));var n=d.filter((function(t){return t.copiable()}));n.length>0&&t.push(new $.Action({name:"copy",label:Object(a.t)("Copy"),shortcutHint:G.humanReadableModifiers(Q.Modifiers.Mod)+e+" C",onExecute:function(){c.copySourcesToClip(n)}}));if(!function(){if(!(null==r?void 0:r.isMultipleLayout()))return!1;return d.some((function(t){return t.isSynchronizable()}))}())return t
;d.filter((function(t){return!!t.linkKey})).length?t.push(new $.Action({name:"stop-sync",label:Object(a.t)("Stop syncing"),onExecute:function(){c.unlinkLines&&c.unlinkLines(d)}})):t.push(new $.Action({name:"sync",label:Object(a.t)("Sync to all charts"),onExecute:function(){c.copyToOtherCharts(d)}}));return t}();e.length&&t.push.apply(t,Object(_.f)([new $.Separator],e));t.push(new $.Separator,new $.Action({label:Object(a.t)("Hide"),icon:tt,onExecute:function(){r.hideSelectedObject()},name:"hide"})),h(t)},onClick:s?function(t){m.contextMenuActionsForSources(d).then((function(e){K.ContextMenuManager.createMenu(e,{mode:"drawer","data-name":"more-menu"}).then((function(e){return e.show(t)}))}))}:void 0,title:e,content:n.a.createElement(H.a,{icon:J}),"data-name":"more",menuDataName:"more-menu"},n.a.createElement(q.a,{parentIsOpened:!0,items:p})));function v(){var t=[],e=c.availableZOrderOperations(d),o=new $.Action({name:"bring-to-front",label:Object(a.t)("Bring to Front"),onExecute:function(){c.bringToFront(d)},disabled:1===d.length&&!e.bringToFrontEnabled}),i=new $.Action({name:"send-to-back",label:Object(a.t)("Send to Back"),onExecute:function(){c.sendToBack(d)},disabled:1===d.length&&!e.sendToBackEnabled}),n=new $.Action({name:"bring-forward",label:Object(a.t)("Bring Forward"),onExecute:function(){c.bringForward(d)},disabled:1===d.length&&!e.bringForwardEnabled}),r=new $.Action({name:"send-backward",label:Object(a.t)("Send Backward"),onExecute:function(){c.sendBackward(d)},disabled:1===d.length&&!e.sendBackwardEnabled});return t.push(o,i,n,r),t}}var ot=o("972a"),it=o("bQEj"),nt=o("UXdH"),rt=o("ZSM+");function st(t){var e=t.property,o=t.model,r=t.title,s=t.className,l=Object(j.a)(e),c=Object(i.useMemo)((function(){return[new $.Action({icon:it,label:Object(a.t)("Line"),active:ot.LineStyle.Solid===l,onExecute:function(){return o.setProperty(e,ot.LineStyle.Solid,r)}}),new $.Action({icon:nt,label:Object(a.t)("Dashed line"),active:ot.LineStyle.Dashed===l,onExecute:function(){return o.setProperty(e,ot.LineStyle.Dashed,r)}}),new $.Action({icon:rt,label:Object(a.t)("Dotted line"),active:ot.LineStyle.Dotted===l,onExecute:function(){return o.setProperty(e,ot.LineStyle.Dotted,r)}})]}),[o,e,l]);return n.a.createElement(U.a,{className:s,arrow:!1,content:n.a.createElement(H.a,{icon:at(l)}),title:r,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement(q.a,{items:c}))}function at(t){switch(t){case ot.LineStyle.Solid:return it;case ot.LineStyle.Dashed:return nt;case ot.LineStyle.Dotted:return rt;default:return""}}var lt=[10,11,12,14,16,20,24,28,32,40];function ct(t){var e=t.property,o=t.model,i=t.title,r=t.className,s=Object(j.a)(e),a=lt.map((function(t){return new $.Action({label:t.toString(),onExecute:function(){return o.setProperty(e,t,i)},active:t===s})}));return n.a.createElement(U.a,{arrow:!1,content:s,className:r,title:i,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu"},n.a.createElement(q.a,{items:a}))}var dt=o("aIyQ"),ut=o.n(dt),pt=(o("m/4m"),o("ADFN"),function(t){function e(o){
var i=t.call(this,e._prepareOptions(o))||this;return i._onWidgetStateChangedDelegate=new ut.a,i._statedWidgets=[],i._currentPopup=null,i._onWindowClickedListener=i._onWindowClicked.bind(i),i}return Object(_.c)(e,t),e.prototype.show=function(){t.prototype.show.call(this),document.addEventListener("mousedown",this._onWindowClickedListener)},e.prototype.hide=function(e){t.prototype.hide.call(this,e),document.removeEventListener("mousedown",this._onWindowClickedListener)},e.prototype.destroy=function(){this._closePopup(),t.prototype.destroy.call(this)},e.prototype.addGroupedWidget=function(t,o){void 0===o&&(o={}),Object(f.assert)(t.states.length>0&&-1!==e._getStateIndexById(t,t.currentStateId),"Argument is invalid (count: "+t.states.length+", state: "+t.currentStateId+")");var i=document.createElement("div");i.className="tv-grouped-floating-toolbar__widget-wrapper apply-common-tooltip",t.widgetAddClass&&i.classList.add(t.widgetAddClass),i.setAttribute("title",t.tooltip);var n={isEnabled:!0,statedWidget:t,toolbarWidget:i},r=this._onWidgetClicked.bind(this,n);n.clickListener=r,i.addEventListener("click",r),this._updateWidgetPreview(n),this.addWidget(i,o),this._statedWidgets.push(n)},e.prototype.findGroupedWidget=function(t){for(var e=this._statedWidgets.length,o=0;o<e;++o){if(this._statedWidgets[o].statedWidget.id===t)return o}return-1},e.prototype.removeGroupedWidget=function(t){for(var e=this._statedWidgets.length,o=0;o<e;++o){var i=this._statedWidgets[o];if(i.statedWidget.id===t)return this._isPopupCreatedForWidget(t)&&this._closePopup(),void 0!==i.clickListener&&i.toolbarWidget.removeEventListener("click",i.clickListener),this.removeWidget(i.toolbarWidget),this._statedWidgets.splice(o,1),void this._updatePopupPosition()}Object(f.assert)(!1,"Unknown groupId("+t+")")},e.prototype.updateGroupedWidget=function(t,e){this._closePopup();var o=this._ensuredGetWidgetDataForId(t);o.statedWidget.currentStateId=e.currentStateId,o.statedWidget.states=e.states,this._updateWidgetPreview(o)},e.prototype.setGroupedWidgetEnabled=function(t,e){var o=this._ensuredGetWidgetDataForId(t);o.isEnabled=e,o.toolbarWidget.classList.toggle("i-disabled",!e)},e.prototype.setGroupedWidgetState=function(t,o){var i=this._ensuredGetWidgetDataForId(t);Object(f.assert)(-1!==e._getStateIndexById(i.statedWidget,o),"Unknown stateId ("+o+")"),i.statedWidget.currentStateId=o,this._updateSubWidgetsState(i.statedWidget),this._updateWidgetPreview(i)},e.prototype.onWidgetStateChanged=function(){return this._onWidgetStateChangedDelegate},e.prototype._onVerticalChanged=function(t,e){this._updatePopupPosition()},e.prototype._ensuredGetWidgetDataForId=function(t){for(var e=0,o=this._statedWidgets;e<o.length;e++){var i=o[e];if(i.statedWidget.id===t)return i}throw new Error("Unknown groupId("+t+")")},e.prototype._onWidgetClicked=function(t,e){var o=this._currentPopup&&this._isPopupCreatedForWidget(t.statedWidget.id);this._closePopup(),!o&&t.isEnabled&&this._createPopup(t)},e.prototype._createPopup=function(t){var e=this,o={createdFor:t.toolbarWidget,
element:document.createElement("div"),stateWidgetId:t.statedWidget.id,widgets:[]};o.element.className+="tv-grouped-floating-toolbar__popup js-popup";var i=t.statedWidget.states.length;t.statedWidget.states.forEach((function(n,r){var s=e._createSubWidget(t,n),a=e._onSubWidgetClicked.bind(e,t,n.id);s.addEventListener("click",a),o.widgets.push({clickListener:a,stateWidget:n,widget:s}),s.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-right-"+r),s.classList.add("tv-grouped-floating-toolbar__sub-widget--slide-left-"+(i-r+1)),n.readonly||o.element.appendChild(s)})),this._currentPopup=o,this._updateSubWidgetsState(t.statedWidget),t.toolbarWidget.classList.add("i-dropped"),this._getWidget().appendChild(this._currentPopup.element),Promise.resolve().then((function(){e._currentPopup&&e._currentPopup.element.classList.add("i-opened")})),this._updatePopupPosition()},e.prototype._closePopup=function(){var t=this;if(this._statedWidgets.forEach((function(t){t.toolbarWidget.classList.remove("i-dropped")})),this._currentPopup){var e=this._currentPopup.widgets,o=this._currentPopup.element;this._currentPopup=null,e.forEach((function(t){t.widget.removeEventListener("click",t.clickListener)})),o.classList.remove("i-opened"),o.addEventListener("transitionend",(function(e){e.target===o&&t._getWidget().removeChild(o)}))}},e.prototype._updateWidgetPreview=function(t){var o=e._getStateIndexById(t.statedWidget,t.statedWidget.currentStateId);Object(f.assert)(-1!==o,"Unknown state id: "+t.statedWidget.currentStateId);var i=t.statedWidget.states[o].widget.cloneNode(!0);t.toolbarWidget.firstChild?t.toolbarWidget.replaceChild(i,t.toolbarWidget.firstChild):(t.toolbarWidget.appendChild(i),t.toolbarWidget.appendChild(e._createCaret()))},e.prototype._updateSubWidgetsState=function(t){this._currentPopup&&this._isPopupCreatedForWidget(t.id)&&this._currentPopup.widgets.forEach((function(o){o.widget.classList.toggle(e._activeSubWidgetClass,o.stateWidget.id===t.currentStateId)}))},e.prototype._updatePopupPosition=function(){if(this._currentPopup){var t=this._currentPopup.createdFor,e=this._getWidget().getBoundingClientRect(),o=this._findWrapperForWidget(t);if(!o||!this._currentPopup)throw new Error("Toolbar has no wrapper for preview's widget or there is no popup");var i=o.getBoundingClientRect(),n=this._currentPopup.element.getBoundingClientRect(),r=this._currentPopup.element;if(this.isVertical())r.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),r.style.top=i.top-e.top+1+"px",r.style.left="",e.left>window.innerWidth-e.right?r.classList.add("tv-grouped-floating-toolbar__popup--at-left"):r.classList.remove("tv-grouped-floating-toolbar__popup--at-left");else{r.classList.remove("tv-grouped-floating-toolbar__popup--at-left");var s=0;i.left+n.width>window.innerWidth?e.left+n.width>window.innerWidth&&(s=e.width-n.width):s=i.left-e.left+1,r.style.left=s+"px",e.bottom+n.height>window.innerHeight?r.classList.add("tv-grouped-floating-toolbar__popup--at-top"):(r.classList.remove("tv-grouped-floating-toolbar__popup--at-top"),r.style.top="")}
}},e.prototype._isPopupCreatedForWidget=function(t){return Boolean(this._currentPopup&&this._currentPopup.stateWidgetId===t)},e.prototype._createSubWidget=function(t,e){var o=document.createElement("div");return o.className+="tv-grouped-floating-toolbar__sub-widget",t.statedWidget.stateWidgetAddClass&&o.classList.add(t.statedWidget.stateWidgetAddClass),o.appendChild(e.widget),o},e.prototype._onSubWidgetClicked=function(t,e){this._closePopup(),t.statedWidget.currentStateId!==e&&(this.setGroupedWidgetState(t.statedWidget.id,e),this._onWidgetStateChangedDelegate.fire(t.statedWidget.id,e))},e.prototype._onWindowClicked=function(t){if(this.isVisible()&&this._currentPopup&&!e._isEventInElement(t,this._currentPopup.element)){for(var o=0;o<this._statedWidgets.length;++o)if(e._isEventInElement(t,this._statedWidgets[o].toolbarWidget))return;this._closePopup()}},e._getStateIndexById=function(t,e){for(var o=0;o<t.states.length;++o)if(t.states[o].id===e)return o;return-1},e._createCaret=function(){var t=document.createElement("div");return t.className="tv-caret tv-caret--small tv-caret--colored tv-grouped-floating-toolbar__caret",t},e._prepareOptions=function(t){return t.addClass?t.addClass+=" tv-grouped-floating-toolbar":t.addClass=" tv-grouped-floating-toolbar",t},e._isEventInElement=function(t,e){return t.target===e||e.contains(t.target)},e._activeSubWidgetClass="tv-grouped-floating-toolbar__sub-widget--current",e}(x.b)),ht=o("yMne");o.d(e,"LineToolPropertiesWidgetBase",(function(){return gt}));var gt=function(){function t(t){var e=this;this._isDrawingFinished=new d.a(!0),this._currentTool=null,this._container=null,this._toolbarRendered=!1,this._templatesButton=null,this._propertyButtons=[],this._commonButtons=[],this._handleSourceEdit=function(t){h.isDirectionalMovementActive.value()||(t?e._floatingToolbar.hide(!0):e._toolbarRendered&&e._floatingToolbar.show())},this._chartWidgetCollection=t,this._floatingToolbar=new pt({defaultPosition:{top:ht.b+15,left:window.innerWidth/2},positionSettingsKey:"properties_toolbar.position",positionStorageType:"device",layout:"horizontal","data-name":"drawing-toolbar"}),this._container=this._floatingToolbar.getReactWidgetContainer(),h.isToolMovingNow.subscribe(this._handleSourceEdit),h.isToolEditingNow.subscribe(this._handleSourceEdit)}return t.prototype.activeChartWidget=function(){return this._chartWidgetCollection.activeChartWidget.value()},t.prototype.selectedSources=function(){return this._chartWidgetCollection.selectedSources.value()},t.prototype._addPropertyButton=function(t){this._propertyButtons.push(t),this._renderToolbar()},t.prototype._addCommonButton=function(t){this._commonButtons.push(t),this._renderToolbar()},t.prototype._addTemplatesButton=function(t){this._templatesButton=t},t.prototype._renderToolbar=function(){null!==this._container&&this.activeChartWidget()&&this.activeChartWidget().model()&&(s.a.render(n.a.createElement(B,{templateButton:this._templatesButton,propertyButtons:this._propertyButtons,commonButtons:this._commonButtons,
isDrawingFinished:this._isDrawingFinished.value(),activeChartWidget:this.activeChartWidget()}),this._container),this._toolbarRendered=!0)},t.prototype._unmountToolbar=function(){null!==this._container&&(s.a.unmountComponentAtNode(this._container),this._toolbarRendered=!1)},t.prototype._clearTemplatesButton=function(){this._templatesButton=null},t.prototype._clearPropertyButtons=function(){this._propertyButtons=[]},t.prototype._clearCommonButtons=function(){this._commonButtons=[]},t.prototype._isToolbarRendered=function(){return this._toolbarRendered},t.prototype._createSettingsButton=function(){if(!(this.selectedSources().length>1)){var t={component:O,props:{title:Object(a.t)("Settings"),activeChartWidget:this.activeChartWidget()}};this._addCommonButton(t)}},t.prototype._createLockButton=function(){var t={component:F,props:{title:"Lock",activeChartWidget:this.activeChartWidget()}};this._addCommonButton(t)},t.prototype._createRemoveButton=function(){var t={component:D,props:{title:Object(a.t)("Remove"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0};this._addCommonButton(t)},t.prototype._createDotsButton=function(){this._addCommonButton({component:et,props:{title:Object(a.t)("More"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0})},t.prototype._createAlertButton=function(){},t.prototype._createSourceActions=function(){this._createLockButton()},t.prototype._createLineStyleButton=function(t){var e=this.selectedSources();if(0===e.length)return!1;var o={component:st,props:{property:e[0].properties().linestyle||t,title:Object(a.t)("Style"),model:this.activeChartWidget().model(),"data-name":"style"}};return this._addPropertyButton(o),!0},t.prototype._createFontSizeButton=function(t){var e=this.selectedSources();if(0===e.length)return!1;var o={component:ct,props:{property:e[0].properties().fontsize||t,title:Object(a.t)("Font Size"),model:this.activeChartWidget().model(),"data-name":"font-size"}};return this._addPropertyButton(o),!0},t.prototype._createCommonButtons=function(){this._commonButtons.length&&this._clearCommonButtons(),l.enabled("property_pages")&&this._createSettingsButton(),this._createSourceActions(),this._createRemoveButton(),this._createDotsButton()},t.prototype._prepareProperties=function(t){var e=this.selectedSources().filter((function(e){return Object(p.isLineTool)(e)&&e.properties()[t]}));if(!(e.filter((function(e){return e.properties()[t].visible()})).length<1))return e.map((function(e){return e.properties()[t]})).filter(u.notNull)},t.prototype._createProperty=function(t,e,o,i){if(e){var n=this._prepareProperties(o);if(!n)return;var r=this.activeChartWidget().model();return this._isWidthProperty(n[0])?new v(new g.MultipleLineWidthsProperty(n),r,i):new y.b(new g.MultipleLineColorsProperty(n),r,i)}if(t&&t.visible())return this._isWidthProperty(t)?new g.MultipleLineWidthsProperty([t]):new y.a(new g.MultipleLineColorsProperty([t]))},t.prototype._shouldShowBackgroundProperty=function(t,e){return!e||!e.fillBackground||!!e.fillBackground.value()},
t.prototype._isDrawingTool=function(t){return Boolean(null==t?void 0:t.toLowerCase().includes("linetool"))},t.prototype._isWidthProperty=function(t){return t instanceof g.LineToolWidthsProperty},t}()},"W0/v":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="none"><path stroke="currentColor" d="M1.5 11.5l-.7.7a1 1 0 0 0-.3.71v3.59h3.59a1 1 0 0 0 .7-.3l.71-.7m-4-4l9-9m-9 9l2 2m2 2l9-9m-9 9l-2-2m11-7l1.3-1.3a1 1 0 0 0 0-1.4l-2.6-2.6a1 1 0 0 0-1.4 0l-1.3 1.3m4 4l-4-4m-7 11l9-9"/></svg>'},X1vi:function(t,e,o){t.exports={wrap:"wrap-2EG6_6QR",icon:"icon-2EG6_6QR",colorBg:"colorBg-2EG6_6QR",color:"color-2EG6_6QR",multicolor:"multicolor-2EG6_6QR",white:"white-2EG6_6QR"}},Xxuz:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentcolor" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5V7.05l.4.09c.9.18 1.73.53 2.46 1.02l.34.23.29-.3.81-.8c.2-.2.52-.2.71 0l.7.7.36-.35-.35.35c.2.2.2.51 0 .7l-.82.82-.29.29.23.34c.49.73.84 1.57 1.02 2.46l.08.4H22.5c.28 0 .5.22.5.5v1a.5.5 0 0 1-.5.5H20.95l-.09.4c-.18.9-.53 1.73-1.02 2.46l-.23.34.3.29.8.81c.2.2.2.52 0 .71l-.7.7a.5.5 0 0 1-.7 0l-.82-.8-.29-.3-.34.23c-.73.49-1.57.84-2.46 1.02l-.4.08V22.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5V20.95l-.4-.09a6.96 6.96 0 0 1-2.46-1.02l-.34-.23-.29.3-.81.8.35.36-.35-.35a.5.5 0 0 1-.71 0l-.7-.71a.5.5 0 0 1 0-.7l-.36-.36.35.35.82-.81.29-.29-.23-.34a6.96 6.96 0 0 1-1.02-2.46l-.08-.4H5.5a.5.5 0 0 1-.5-.5v-1c0-.28.22-.5.5-.5H7.05l.09-.4c.18-.9.53-1.73 1.02-2.46l.23-.34-.3-.29-.8-.81a.5.5 0 0 1 0-.71l.7-.7c.2-.2.51-.2.7 0l.82.8.29.3.34-.23a6.96 6.96 0 0 1 2.46-1.02l.4-.08V5.5zm.5-1.5c-.83 0-1.5.67-1.5 1.5v.75c-.73.2-1.43.48-2.06.86l-.54-.53a1.5 1.5 0 0 0-2.12 0l-.7.7a1.5 1.5 0 0 0 0 2.12l.53.54A7.95 7.95 0 0 0 6.25 12H5.5c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5h.75c.2.73.48 1.43.86 2.06l-.53.54a1.5 1.5 0 0 0 0 2.12l.7.7a1.5 1.5 0 0 0 2.12 0l.54-.53c.63.38 1.33.67 2.06.86v.75c0 .83.67 1.5 1.5 1.5h1c.83 0 1.5-.67 1.5-1.5v-.75a7.95 7.95 0 0 0 2.06-.86l.54.53a1.5 1.5 0 0 0 2.12 0l.7-.7a1.5 1.5 0 0 0 0-2.12l-.53-.54c.38-.63.67-1.33.86-2.06h.75c.83 0 1.5-.67 1.5-1.5v-1c0-.83-.67-1.5-1.5-1.5h-.75a7.95 7.95 0 0 0-.86-2.06l.53-.54a1.5 1.5 0 0 0 0-2.12l-.7-.7a1.5 1.5 0 0 0-2.12 0l-.54.53A7.95 7.95 0 0 0 16 6.25V5.5c0-.83-.67-1.5-1.5-1.5h-1zM12 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>'},"ZSM+":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor"><circle cx="9" cy="14" r="1"/><circle cx="4" cy="14" r="1"/><circle cx="14" cy="14" r="1"/><circle cx="19" cy="14" r="1"/><circle cx="24" cy="14" r="1"/></svg>'},bQEj:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path stroke="currentColor" d="M4 13.5h20"/></svg>'},dRg2:function(t,e,o){t.exports={item:"item-3Te2Sp8a",withIcon:"withIcon-3Te2Sp8a",icon:"icon-3Te2Sp8a",labelRow:"labelRow-3Te2Sp8a",
multiWidth:"multiWidth-3Te2Sp8a",buttonWrap:"buttonWrap-3Te2Sp8a",buttonLabel:"buttonLabel-3Te2Sp8a"}},gmn6:function(t,e,o){"use strict";o.r(e),function(t){o.d(e,"FavoriteDrawingToolbar",(function(){return h}));var i=o("mrSG"),n=(o("P5fv"),o("nbsC"),o("EsMY"),o("YFKU"),o("0ZwQ")),r=o("b2d7"),s=o("7KDR"),a=o("5VQP"),l=o("mMWL"),c=o("MP+M"),d=o("Vdly"),u=o("hY0g"),p=o.n(u),h=(o("TXAa"),function(e){function o(t){var o=e.call(this,{allowSortable:!Modernizr.mobiletouch,dragOnlyInsideToolbar:!0,defaultPosition:t,positionSettingsKey:"chart.favoriteDrawingsPosition",positionStorageType:"device"})||this;return o._linetoolsWidgets={},o._canBeShownValue=new p.a(!1),o._attachHandlers(),o._loadVisibilityState(),o}return Object(i.c)(o,e),o.prototype.show=function(){this._canBeShownValue.value()&&(d.setValue("ChartFavoriteDrawingToolbarWidget.visible",!0),this.isVisible()||this._renderAllLinetools(),e.prototype.show.call(this))},o.prototype.hide=function(){d.setValue("ChartFavoriteDrawingToolbarWidget.visible",!1),e.prototype.hide.call(this)},o.prototype.canBeShown=function(){return this._canBeShownValue.readonly()},o.prototype._onFavoriteAdded=function(t){this._canBeShownValue.setValue(!0),this.addWidget(this._createLinetoolWidget(t)),this.show()},o.prototype._onFavoriteRemoved=function(t){this.removeWidget(this._linetoolsWidgets[t]),delete this._linetoolsWidgets[t],0===r.a.favoritesCount()&&(this._canBeShownValue.setValue(!1),this.hide())},o.prototype._onFavoriteMoved=function(){this._renderAllLinetools()},o.prototype._onSelectedLinetoolChanged=function(t){var e=this;Object.keys(this._linetoolsWidgets).forEach((function(o){e._linetoolsWidgets[o].classList.toggle("i-active",t===o)}))},o.prototype._createLinetoolWidget=function(e){var o=$(t.render('<span class="tv-favorited-drawings-toolbar__widget {{#isActive}}i-active{{/isActive}} apply-common-tooltip" title="{{title}}">{{{icon}}}</span>',{icon:c.a[e].icon,isActive:e===l.tool.value(),title:c.a[e].localizedName}))[0];return o.addEventListener("click",(function(t){t.preventDefault(),l.tool.value()!==e&&l.tool.setValue(e)})),this._linetoolsWidgets[e]=o,o},o.prototype._renderAllLinetools=function(){var t=this;this._linetoolsWidgets={},this.removeWidgets(),r.a.favorites().filter((function(t){return c.a[t]})).forEach((function(e){t.addWidget(t._createLinetoolWidget(e))}))},o.prototype._attachHandlers=function(){var t=this;r.a.favoriteAdded.subscribe(this,this._onFavoriteAdded),r.a.favoriteRemoved.subscribe(this,this._onFavoriteRemoved),r.a.favoriteMoved.subscribe(this,this._onFavoriteMoved),r.a.favoritesSynced.subscribe(null,(function(){t._loadVisibilityState(),t._renderAllLinetools()})),this.onWidgetsReordered().subscribe(this,(function(e,o){if(r.a.favoriteMoved.unsubscribe(t,t._onFavoriteMoved),!r.a.moveFavorite(r.a.favorite(e),o))throw new Error("Something went wrong");r.a.favoriteMoved.subscribe(t,t._onFavoriteMoved)})),this.onContextMenu((function(e){e.preventDefault();var o=new s.Action({label:window.t("Hide Favorite Drawing Tools Toolbar"),onExecute:function(){t.hide()}})
;a.ContextMenuManager.createMenu([o]).then((function(t){t.show(e)}))})),l.tool.subscribe(this._onSelectedLinetoolChanged.bind(this))},o.prototype._loadVisibilityState=function(){var t=r.a.favoritesCount()>0;this._canBeShownValue.setValue(t),d.getBool("ChartFavoriteDrawingToolbarWidget.visible",!0)&&t?this.show():this.hide()},o}(n.b))}.call(this,o("nbsC"))},"m/4m":function(t,e,o){},mQbF:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15" fill="none"><path stroke="currentColor" d="M4 14.5h2.5m2.5 0H6.5m0 0V.5m0 0h-5a1 1 0 0 0-1 1V4m6-3.5h5a1 1 0 0 1 1 1V4"/></svg>'},mwqF:function(t,e,o){"use strict";var i=o("mrSG"),n=o("q1tI"),r=o("TSYQ");function s(t,e){const{intent:o="primary",size:i="m",appearance:n="default",useFullWidth:s=!1,tabIndex:a=0,icon:l,className:c}=e;return r(c,t.button,t["size-"+i],t["intent-"+o],t["appearance-"+n],s&&t["full-width"],-1===a&&t.noOutline,l&&"s"!==i&&t["with-icon"])}var a=o("2A9e");o("+l/S");function l(t){const{className:e,intent:o,size:l,appearance:c,disabled:d,useFullWidth:u,reference:p,icon:h,children:g,tabIndex:_}=t,f=Object(i.e)(t,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","tabIndex"]),m=s(a,{intent:o,size:l,appearance:c,disabled:d,useFullWidth:u,tabIndex:_,icon:h});return n.createElement("button",Object.assign({className:r(m,e),disabled:d,ref:p,tabIndex:_},f),h&&"s"!==l&&n.createElement("span",{className:a.icon},h),n.createElement("span",{className:a.content},g))}o.d(e,"a",(function(){return l}))},myiL:function(t,e,o){"use strict";o.r(e),o.d(e,"LineWidthButton",(function(){return b}));var i=o("q1tI"),n=o.n(i),r=o("TSYQ"),s=o("Eyy1"),a=o("Iivm"),l=o("82wv"),c=o("5hRh"),d=o("N5tr"),u=o("nPPD"),p=o("O5Oz"),h=o("xnr+"),g=o("n3oB"),_=o("2F1E"),f=o("Lnv9"),m=o("dRg2"),v=Object(u.a)(d.a,m),y=[{value:1,icon:p},{value:2,icon:h},{value:3,icon:g},{value:4,icon:_}];function b(t){var e=t.multipleProperty,o=t.title,i=t.model,u=t.className,p=t.isSmallScreen,h=Object(c.a)(Object(s.ensureDefined)(e)),g="mixed"===h||!h,_=function(t){var e=y.find((function(e){return e.value===t}));if(!e)return f;return e.icon}(h);return n.a.createElement(l.a,{className:u,arrow:!1,title:o,"data-name":t["data-name"],menuDataName:t["data-name"]+"-menu",content:n.a.createElement("div",null,g?n.a.createElement("div",{className:m.multiWidth},n.a.createElement(a.a,{icon:f})):n.a.createElement("div",{className:m.buttonWrap},!p&&n.a.createElement(a.a,{icon:_}),n.a.createElement("div",{className:r(!p&&m.buttonLabel)},h+"px")))},y.map((function(t){var e=t.value,o=t.icon;return n.a.createElement(d.b,{key:e,theme:v,label:e+"px",icon:o,isActive:e===h,onClick:b,onClickArg:e})})));function b(t){t&&e&&(i.beginUndoMacro(o),e.setValue(t,void 0,{applyValue:function(t,e){i.setProperty(t,e,o)}}),i.endUndoMacro())}}},n3oB:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 3" width="18" height="3"><rect width="18" height="3" fill="currentColor" rx="1.5"/></svg>'},"p0W+":function(t,e,o){"use strict"
;o.d(e,"a",(function(){return l}));var i=o("mrSG"),n=o("q1tI"),r=o("TSYQ"),s=o("tU7i"),a=o("EvtC"),l=n.forwardRef((function(t,e){var o=t.className,l=Object(i.e)(t,["className"]);return n.createElement(s.b,Object(i.a)({},l,{ref:e,className:r(o,a.button)}))}))},qAO1:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 12" width="8" height="12" fill="currentColor"><rect width="2" height="2" rx="1"/><rect width="2" height="2" rx="1" y="5"/><rect width="2" height="2" rx="1" y="10"/><rect width="2" height="2" rx="1" x="6"/><rect width="2" height="2" rx="1" x="6" y="5"/><rect width="2" height="2" rx="1" x="6" y="10"/></svg>'},rzV7:function(t,e,o){"use strict";var i=Object.prototype.hasOwnProperty;function n(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}t.exports=function(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var o=Object.keys(t),r=Object.keys(e);if(o.length!==r.length)return!1;for(var s=0;s<o.length;s++)if(!i.call(e,o[s])||!n(t[o[s]],e[o[s]]))return!1;return!0}},tPkB:function(t,e,o){"use strict";var i=o("mMWL"),n=o("Ve4Q").LineToolPropertiesWidgetBase,r=o("e92V").isLineDrawnWithPressedButton,s=o("CW80"),a=(s.createLineToolProperties,s.isLineTool);const l=o("IhRv").ColorPickerButton,c=o("myiL").LineWidthButton;function d(t){n.call(this,t),this._hasAlertWathcedValue=null,this._templatesButton=null,this._currentProperties=null,this._hideTimeout=null,this.attachHandlers()}inherit(d,n),d.prototype.attachHandlers=function(){i.tool.subscribe(this.onToolChanged.bind(this),{callWithLast:!0}),this._chartWidgetCollection.selectedSources.subscribe(this.onSourceChanged.bind(this))},d.prototype.onToolChanged=function(t,e){this._currentTool=t;const o=this.selectedSources();this._isDrawingTool(t)?(this._isDrawingFinished.setValue(!1),this._updateVisibility()):o&&o.length?(o.length>1&&this._isDrawingFinished.setValue(!0),this.onSourceChanged(this.selectedSources())):this.hide()},d.prototype.findSourceOnWidget=function(t){for(var e=0;e<this.activeChartWidget().model().panes().length;e++)for(var o=this.activeChartWidget().model().panes()[e].sourcesByGroup().all(),i=0;i<o.length;i++)if(o[i]===t)return o[i]},d.prototype.onSourceChanged=function(t){if(this._hasAlertWathcedValue&&(this._hasAlertWathcedValue.destroy(),this._hasAlertWathcedValue=null),t&&t.length&&(1!==t.length||a(t[0])))if(this._createCommonButtons(),1===t.length){var e=t[0];e.isAvailableInFloatingWidget()&&this.findSourceOnWidget(e)?(!e.userEditEnabled()||!r(e.toolname)&&this.activeChartWidget().model().lineBeingCreated()||(this._isDrawingFinished.setValue(!0),e.canHasAlert()&&(this._hasAlertWathcedValue=e.hasAlert.spawn())),this.showPropertiesOf(e.toolname,e.properties(),!0),this.showTemplatesOf({source:e}),this._toolbarVisible=!0,this._updateVisibility()):this.hide()}else this._clearProperties(),this._templatesButton&&(this._clearTemplatesButton(),this._templatesButton=null),this._updateVisibility(),this._createWidthsButton(void 0,!0),this._createColorsButton(void 0,!0),
this._createBackgroundsButton(void 0,!0),this._createTextColorsButton(void 0,!0);else this.hide()},d.prototype._createWidthsButton=function(t,e){if(this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineWidthsProperty=this._createProperty(t,e,"linesWidths","Set Line tool(s) line width"),!this._lineWidthsProperty)return!0;var o=window.t("Line tool width");e&&(1!==this.selectedSources().filter((function(t){return a(t)&&t.properties().linesWidths})).length&&(o=window.t("Line tool widths")));return this._addPropertyButton({component:c,props:{title:o,multipleProperty:this._lineWidthsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-width"}}),!0},d.prototype._createColorsButton=function(t,e){return this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._lineColorsProperty=this._createProperty(t,e,"linesColors","Set Line tool(s) color"),!this._lineColorsProperty||(this._addPropertyButton({component:l,props:{icon:u,title:window.t("Line tool colors"),property:this._lineColorsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-color"}}),!0)},d.prototype._createBackgroundsButton=function(t,e){return this._backgroundsProperty&&(this._backgroundsProperty.destroy(),this._backgroundsProperty=null),this._backgroundsProperty=this._createProperty(t,e,"backgroundsColors","Set Line background(s) color"),!this._backgroundsProperty||(this._addPropertyButton({component:l,props:{icon:p,title:window.t("Line tool backgrounds"),property:this._backgroundsProperty,model:this.activeChartWidget().model(),"data-name":"background-color"}}),!0)},d.prototype._createTextColorsButton=function(t,e){return this._textColorsProperty&&(this._textColorsProperty.destroy(),this._textColorsProperty=null),this._textColorsProperty=this._createProperty(t,e,"textsColors","Set Line tool(s) text color"),!this._textColorsProperty||(this._addPropertyButton({component:l,props:{icon:h,title:window.t("Line tool text colors"),property:this._textColorsProperty,model:this.activeChartWidget().model(),"data-name":"text-color"}}),!0)},d.prototype.showTemplatesOf=function(t){},d.prototype.templatesList=function(){return this._templatesList},d.prototype._getPossibleProperty=function(t){for(var e=[],o=this._defaultToolProperties(),i=0;i<o.length;i++){var n=o[i];n.name in t&&e.push(n)}return e},d.prototype.showPropertiesOf=function(t,e,o){this._toolExceptionCases||(this._toolExceptionCases=this._createToolExceptionCases());var i=this._toolExceptionCases[t]||this._getPossibleProperty(e);if(this._clearProperties(),this._propertiesVisible=!1,i.length){for(var n={},r=0;r<i.length;r++){for(var s=i[r],a=e,c=s.name.split("."),d=0;d<c.length;++d)a=a&&a[c[d]];var u=s.showIf;if("function"!=typeof u||u(a,e)){var p=s.factory;if(p&&p.call(this,a,o))continue;if(!a)continue;if(this._propertiesVisible=!0,"combobox"!==s.inputType){const t={component:l,props:{icon:s.iconSvgCode,title:s.title,"data-name":s.dataName,property:a,model:this.activeChartWidget().model()}}
;this._addPropertyButton(t);continue}n[s.name]=a}}this._currentProperties=n}},d.prototype._updateVisibility=function(){this._isDrawingFinished.value()&&(this._toolbarVisible||this._propertiesVisible)?this._show():this.hide()},d.prototype._clearProperties=function(){this._clearPropertyButtons(),this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._currentProperties&&(this._currentProperties=null)},d.prototype.hide=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(()=>{this._floatingToolbar.hide(!0),this._isToolbarRendered()&&this._unmountToolbar(),this._clearProperties(),this._clearCommonButtons()},0)},d.prototype._show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._floatingToolbar.show(),this._renderToolbar(),this._floatingToolbar.checkPosition()},d.prototype.refresh=function(){this.onSourceChanged(this.selectedSources())};var u=o("W0/v"),p=o("0fuu"),h=o("mQbF"),g=window.t("Color");d.prototype._defaultToolProperties=function(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:u,title:g,factory:d.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:p,title:$.t("Background Color"),factory:d.prototype._createBackgroundsButton,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"textsColors",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:h,factory:d.prototype._createTextColorsButton,dataName:"text-color"},{name:"linesWidths",inputType:"combobox",factory:d.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:d.prototype._createLineStyleButton}]},d.prototype._riskPropertiesExceptionCases=function(){return[{name:"textcolor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:h,dataName:"text-color"},{name:"profitBackground",title:$.t("Profit Background Color"),inputType:"colorPicker",iconSvgCode:p,dataName:"background-color"},{name:"stopBackground",title:$.t("Stop Background Color"),inputType:"colorPicker",iconSvgCode:p,dataName:"background-color"}]},d.prototype._rangeExceptionCases=function(){return[{name:"linecolor",inputType:"colorPicker",iconSvgCode:u,title:g,dataName:"line-tool-color"},{name:"backgroundColor",inputType:"colorPicker",iconSvgCode:p,title:$.t("Background Color"),dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:d.prototype._createWidthsButton}]},d.prototype._brushPropertiesExceptionCase=function(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:u,title:$.t("Color"),factory:d.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:p,title:$.t("Background Color"),dataName:"background-color",factory:d.prototype._createBackgroundsButton},{name:"linesWidths",inputType:"combobox",
factory:d.prototype._createWidthsButton}]},d.prototype._bezierPropertiesExceptionCases=function(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:u,title:$.t("Color"),factory:d.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:p,dataName:"background-color",title:$.t("Background Color"),factory:d.prototype._createBackgroundsButton,showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:d.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:d.prototype._createLineStyleButton}]},d.prototype._textPropertiesExceptionCases=function(){return[{name:"color",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:h,dataName:"text-color"},{name:"backgroundColor",title:$.t("Background Color"),inputType:"colorPicker",iconSvgCode:p,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"fontsize",title:$.t("Font Size"),inputType:"combobox",factory:d.prototype._createFontSizeButton}]},d.prototype._notePropertiesExceptionCases=function(){return[{name:"markerColor",title:$.t("Marker Color"),inputType:"colorPicker",iconSvgCode:u,dataName:"line-tool-color"},{name:"textColor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:h,dataName:"text-color"},{name:"fontSize",title:$.t("Font Size"),inputType:"combobox",factory:d.prototype._createFontSizeButton}]},d.prototype._createToolExceptionCases=function(){return{LineToolRegressionTrend:[],LineToolBrush:d.prototype._brushPropertiesExceptionCase(),LineToolBezierQuadro:d.prototype._bezierPropertiesExceptionCases(),LineToolBezierCubic:d.prototype._bezierPropertiesExceptionCases(),LineToolText:d.prototype._textPropertiesExceptionCases(),LineToolTextAbsolute:d.prototype._textPropertiesExceptionCases(),LineToolBalloon:d.prototype._textPropertiesExceptionCases(),LineToolCallout:d.prototype._textPropertiesExceptionCases(),LineToolPriceLabel:d.prototype._textPropertiesExceptionCases(),LineToolDateRange:d.prototype._rangeExceptionCases(),LineToolPriceRange:d.prototype._rangeExceptionCases(),LineToolDateAndPriceRange:d.prototype._rangeExceptionCases(),LineToolNote:d.prototype._notePropertiesExceptionCases(),LineToolNoteAbsolute:d.prototype._notePropertiesExceptionCases(),LineToolRiskRewardLong:d.prototype._riskPropertiesExceptionCases(),LineToolRiskRewardShort:d.prototype._riskPropertiesExceptionCases(),LineToolBarsPattern:[{name:"color",title:g,inputType:"colorPicker",iconSvgCode:p,dataName:"background-color"}],LineToolProjection:[{name:"color1",title:$.t("Background color 1"),inputType:"colorPicker",iconSvgCode:p,dataName:"background-color"},{name:"color2",title:$.t("Background color 2"),inputType:"colorPicker",iconSvgCode:p,dataName:"background-color"},{name:"linesWidths",inputType:"combobox",factory:d.prototype._createWidthsButton}],LineToolSignpost:[{name:"fontSize",title:$.t("Font Size"),inputType:"combobox"},{name:"linesColors",inputType:"colorPicker",iconSvgCode:p,dataName:"background-color",
title:g,factory:d.prototype._createBackgroundsButton,showIf:function(t,e){return e&&e.showImage.value()}}]}},t.exports=d},turx:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return l}));var i=o("mrSG"),n=o("Eyy1"),r=o("tc+8"),s=function(t){function e(e){var o=t.call(this)||this;return o._listenersMappers=[],o._isProcess=!1,o._baseProperty=e,o}return Object(i.c)(e,t),e.prototype.destroy=function(){this._baseProperty.destroy()},e.prototype.value=function(){var t=this._baseProperty.value();return"mixed"===t?"":t},e.prototype.visible=function(){return this._baseProperty.visible()},e.prototype.setValue=function(t){var e=this;this._isProcess=!0,this._baseProperty.setValue(""===t?"mixed":t,void 0,{applyValue:this._applyValue.bind(this)}),this._isProcess=!1,this._listenersMappers.forEach((function(t){t.method.call(t.obj,e)}))},e.prototype.subscribe=function(t,e){var o=this,i=function(i){o._isProcess||e.call(t,o)},n={obj:t,method:e,callback:i};this._listenersMappers.push(n),this._baseProperty.subscribe(t,i)},e.prototype.unsubscribe=function(t,e){var o,i=Object(n.ensureDefined)(null===(o=this._listenersMappers.find((function(o){return o.obj===t&&o.method===e})))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(t,i)},e.prototype.unsubscribeAll=function(t){this._baseProperty.unsubscribeAll(t)},e}(o.n(r).a),a=function(t){function e(e,o,i){var n=t.call(this,e)||this;return n._undoModel=o,n._undoText=i,n}return Object(i.c)(e,t),e.prototype._applyValue=function(t,e){this._undoModel.setProperty(t,e,this._undoText)},e}(s),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype._applyValue=function(t,e){t.setValue(e)},e}(s)},ucyy:function(t,e,o){t.exports={button:"button-1gEXpG61"}},"xnr+":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 2" width="18" height="2"><rect width="18" height="2" fill="currentColor" rx="1"/></svg>'}}]);