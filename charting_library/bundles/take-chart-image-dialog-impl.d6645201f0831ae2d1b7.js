(window.webpackJsonp=window.webpackJsonp||[]).push([["take-chart-image-dialog-impl"],{"1O6C":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("mrSG"),r=n("q1tI"),i=n("TSYQ"),a=n("+EG+"),s=n("jAh7"),c=n("QpNh"),l=n("aYmi"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._manager=new s.OverlapManager,t._handleSlot=function(e){t._manager.setContainer(e)},t}return Object(o.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.rounded,n=void 0===t||t,s=e.shadowed,d=void 0===s||s,p=e.fullscreen,u=void 0!==p&&p,h=e.darker,m=void 0!==h&&h,g=e.className,v=e.backdrop,f=i(g,l.dialog,n&&l.rounded,d&&l.shadowed,u&&l.fullscreen,m&&l.darker),w=Object(c.a)(this.props),_=this.props.style?Object(o.a)(Object(o.a)({},this._createStyles()),this.props.style):this._createStyles();return r.createElement(r.Fragment,null,r.createElement(a.b.Provider,{value:this._manager},v&&r.createElement("div",{onClick:this.props.onClickBackdrop,className:l.backdrop}),r.createElement("div",Object(o.a)({},w,{className:f,style:_,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:-1}),this.props.children)),r.createElement(a.a,{reference:this._handleSlot}))},t.prototype._createStyles=function(){var e=this.props,t=e.bottom,n=e.left,o=e.width;return{bottom:t,left:n,right:e.right,top:e.top,zIndex:e.zIndex,maxWidth:o,height:e.height}},t}(r.PureComponent)},"6KyJ":function(e,t,n){"use strict";var o,r=n("q1tI"),i=n("TSYQ"),a=n("K9GE"),s=n("YZ9j");n("O7m7");!function(e){e[e.Initial=0]="Initial",e[e.Appear=1]="Appear",e[e.Active=2]="Active"}(o||(o={}));class c extends r.PureComponent{constructor(e){super(e),this._stateChangeTimeout=null,this.state={state:o.Initial}}render(){const{className:e,color:t="black"}=this.props,n=i(s.item,{[s[t]]:Boolean(t)});return r.createElement("span",{className:i(s.loader,e,this._getStateClass())},r.createElement("span",{className:n}),r.createElement("span",{className:n}),r.createElement("span",{className:n}))}componentDidMount(){this.setState({state:o.Appear}),this._stateChangeTimeout=setTimeout(()=>{this.setState({state:o.Active})},2*a.c)}componentWillUnmount(){this._stateChangeTimeout&&(clearTimeout(this._stateChangeTimeout),this._stateChangeTimeout=null)}_getStateClass(){switch(this.state.state){case o.Initial:return s["loader-initial"];case o.Appear:return s["loader-appear"];default:return""}}}n.d(t,"a",(function(){return c}))},"8MIK":function(e,t,n){e.exports={modal:"modal-1aOR8tBW",content:"content-1aOR8tBW",form:"form-1aOR8tBW",copyForm:"copyForm-1aOR8tBW","input-container":"input-container-1aOR8tBW",input:"input-1aOR8tBW",copyBtn:"copyBtn-1aOR8tBW",shadow:"shadow-1aOR8tBW",actions:"actions-1aOR8tBW",link:"link-1aOR8tBW",socials:"socials-1aOR8tBW",icon:"icon-1aOR8tBW",socialsText:"socialsText-1aOR8tBW"}},BHQn:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="#1DA1F2" d="M10.28 22.26c7.55 0 11.68-6.26 11.68-11.67v-.53c.8-.58 1.49-1.3 2.04-2.13-.74.33-1.53.54-2.36.65.85-.5 1.5-1.32 1.8-2.28-.78.48-1.66.81-2.6 1a4.1 4.1 0 00-7 3.74c-3.4-.17-6.43-1.8-8.46-4.29a4.1 4.1 0 001.28 5.48c-.68-.02-1.3-.2-1.86-.5v.05a4.11 4.11 0 003.29 4.02 4 4 0 01-1.85.08 4.1 4.1 0 003.83 2.85A8.23 8.23 0 014 20.43a11.67 11.67 0 006.28 1.83z"/></svg>'},GyvH:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 15" width="22" height="15"><g fill="none" fill-rule="evenodd" stroke-width="2"><path stroke="#757575" d="M6.25 5.812L11 10.087l4.75-4.275M11 9.868V.315"/><path stroke="#ADAEB0" d="M21 10v4H1v-4"/></g><path d="M.008 12.47V9.994H1.96v3.003h18.095V9.988l.958.021.957.021.02 2.46.02 2.458H.008v-2.477z"/><path d="M8.642 9.27a673.518 673.518 0 0 0-2.658-2.396l-.369-.325.657-.716.658-.716 1.49 1.35c.819.741 1.525 1.348 1.57 1.348.054 0 .079-1.143.079-3.716V.382H11.946v3.717c0 2.129.029 3.716.067 3.716.037 0 .738-.607 1.558-1.349l1.491-1.35.508.543c.28.298.57.626.647.73l.14.187-2.632 2.366c-1.447 1.3-2.668 2.372-2.712 2.381-.044.01-1.111-.915-2.37-2.054z"/></svg>'},O7m7:function(e,t,n){},RgaO:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("mrSG"),r=n("8Rai");function i(e){var t=e.children,n=Object(o.e)(e,["children"]);return t(Object(r.a)(n))}},UJLh:function(e,t,n){e.exports={wrap:"wrap-2qEpRlNG",container:"container-2qEpRlNG",backdrop:"backdrop-2qEpRlNG",modal:"modal-2qEpRlNG",dialog:"dialog-2qEpRlNG"}},YZ9j:function(e){e.exports=JSON.parse('{"loader":"loader-8x1ZxRwP","item":"item-2-89r_cd","tv-button-loader":"tv-button-loader-23vqS1uY","black":"black-20Ytsf0V","white":"white-1ucCcc2I","gray":"gray-XDhHSS-T","loader-initial":"loader-initial-1deQDeio","loader-appear":"loader-appear-2krFtMrd"}')},aYmi:function(e,t,n){e.exports={dialog:"dialog-UM6w7sFp",rounded:"rounded-UM6w7sFp",shadowed:"shadowed-UM6w7sFp",fullscreen:"fullscreen-UM6w7sFp",darker:"darker-UM6w7sFp",backdrop:"backdrop-UM6w7sFp"}},fMMV:function(e,t,n){"use strict";n.r(t);n("YFKU");var o=n("Wt0y"),r=n("mrSG"),i=(n("HbRj"),n("Kxc7")),a=n("BHQF");function s(e,t,n,o){var s;return void 0===o&&(o={}),Object(r.b)(this,void 0,void 0,(function(){var c,l,d,p,u,h,m,g;return Object(r.d)(this,(function(v){if(c=new FormData,void 0!==o.previews)for(l=0,d=o.previews;l<d.length;l++)p=d[l],c.append("previews[]",p);return void 0!==o.cme&&c.append("cme",String(o.cme)),void 0!==o.wl&&c.append("wl",String(o.wl)),void 0!==o.onWidget&&c.append("onWidget",String(o.onWidget)),o.isReport&&c.append("isReport",String(o.isReport)),(u=window.urlParams)&&u.locale&&c.append("language",u.locale),h=e.activeChartWidget.value(),void 0!==(m=h.widgetCustomer())&&c.append("customer",m),"exchange"===(g=h.properties().childs().timezone.value())&&(g=(null===(s=h.model().mainSeries().symbolInfo())||void 0===s?void 0:s.timezone)||g),c.append("timezone",g),c.append("images",JSON.stringify(e.images(),(function(e,t){
return t instanceof HTMLCanvasElement?null:t}))),function(e,t,n,o){void 0===o&&(o={});Object(r.b)(this,void 0,void 0,(function(){var s,c,l;return Object(r.d)(this,(function(r){switch(r.label){case 0:s=i.enabled("charting_library_base")?o.snapshotUrl||"https://www.tradingview.com/snapshot/":"/snapshot/",r.label=1;case 1:return r.trys.push([1,4,,5]),[4,Object(a.fetch)(s,{body:e,method:"POST",credentials:"same-origin"})];case 2:return[4,(c=r.sent()).text()];case 3:return l=r.sent(),c.ok?t(l):n(),[3,5];case 4:return r.sent(),n(),[3,5];case 5:return[2]}}))}))}(c,t,n,o),[2]}))}))}var c,l=n("JWMC"),d=n("q1tI"),p=n("i8i4"),u=n("TSYQ"),h=n("1O6C"),m=n("uqKQ"),g=n("RgaO"),v=n("UJLh"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._containerRef=null,t._handleContainerRef=function(e){t._containerRef=e},t}return Object(r.c)(t,e),t.prototype.componentDidMount=function(){var e;this.props.autofocus&&(null===(e=this._containerRef)||void 0===e||e.focus())},t.prototype.render=function(){var e=this,t=this.props,n=t.zIndex,o=t.onClickOutside,i=t.children,a=t.className;return d.createElement("div",{ref:this._handleContainerRef,style:{zIndex:n},"data-dialog-name":this.props["data-dialog-name"],tabIndex:-1},d.createElement("div",{className:v.backdrop}),d.createElement("div",{className:v.wrap},d.createElement("div",{className:v.container},d.createElement(g.a,{mouseDown:!0,touchStart:!0,handler:o},(function(t){return d.createElement("div",{className:v.modal,ref:t},d.createElement(h.a,Object(r.a)({},e.props,{className:u(a,v.dialog)}),i))})))))},t.defaultProps={width:500},t}(d.PureComponent),w=Object(m.a)(f),_=n("AVTG"),y=n("Iivm"),b=n("3G1X"),S=n("oj21"),E=n("jPOK");!function(e){function t(e,t){return"cme"===TradingView.widgetCustomer?t+" from cmegroup.com via @tradingview $"+e:"#"+e+" chart "+t+" via https://www.tradingview.com"}function n(e,t){void 0===e&&(e="about:blank"),void 0===t&&(t="snapshot_tweet");var n=Math.round(screen.width/2-275),o=Math.round(screen.height/2-210);return window.open(e,t,"scrollbars=yes,resizable=yes,toolbar=no,location=yes,\n\t\t\t\twidth=550,height=420,\n\t\t\t\tleft="+n+",top="+o)}e.getStatus=t,e.shareSnapshot=function(e){var o=n();return{onFailure:function(){o.close()},onSuccess:function(n){o.location.href=function(e,n){return"https://twitter.com/intent/tweet?&text="+encodeURIComponent(t(e,function(e){return window.location.protocol+"//"+window.location.host+"/x/"+e+"/"}(n)))}(e,n)}}},e.shareSnapshotInstantly=function(e,o){n(function(e,n){return"https://twitter.com/intent/tweet?&text="+encodeURIComponent(t(e,n))}(e,o))}}(c||(c={}));var C=n("ycI/"),O=n("Ialn"),x=n("FQhm"),U=n("ZjKI"),k=n("8MIK"),N=n("BHQn"),T=n("GyvH"),I=function(e){function t(t){var n=e.call(this,t)||this;return n._input=null,n._hideMessages=function(){n.setState({message:"",error:""})},n._setInput=function(e){n._input=e},n._select=function(){null!==n._input&&n._input.select()},n._shareTwitter=function(){c.shareSnapshotInstantly(n.props.symbol||"",n.props.imageUrl||"")},n._onClose=function(){
n.props.onClose&&n.props.onClose(),n._copyBtn=null},n.state={message:t.message,error:t.error},n}return Object(r.c)(t,e),t.prototype.componentDidMount=function(){x.subscribe(U.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._onClose,null)},t.prototype.componentWillUnmount=function(){x.unsubscribe(U.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._onClose,null)},t.prototype.componentWillReceiveProps=function(e){this.setState({message:e.message,error:e.error})},t.prototype.componentDidUpdate=function(e){var t=this;!e.imageUrl&&this.props.imageUrl&&setTimeout((function(){null!==t._input&&(t._input.select(),t._input.focus())}))},t.prototype.render=function(){var e=this,t=this.props.imageUrl,n=this.state,o=n.message,r=n.error,i=!t&&!this.props.message&&!this.props.error,a=u(k.copyBtn,!Object(O.isRtl)()&&k.shadow);return d.createElement(w,{isOpened:this.props.isOpened,className:k.modal,onClickOutside:this._onClose,"data-dialog-type":"take-snapshot-modal"},d.createElement(_.b,{onClose:this._onClose},window.t("Image URL")),o&&d.createElement(_.c,{text:o,isError:!1,onClickOutside:this._hideMessages}),r&&d.createElement(_.c,{text:r,isError:!0,onClickOutside:this._hideMessages}),d.createElement(_.a,null,d.createElement(C.a,{keyCode:27,handler:this._onClose}),d.createElement("div",{className:k.content},i&&d.createElement(E.a,{size:"mini"}),d.createElement("div",{className:k.form,style:{visibility:t?"visible":"hidden"}},d.createElement("div",{className:k.copyForm},d.createElement(b.b,{reference:this._setInput,readonly:!0,stretch:!0,value:t||"",onClick:this._select,onFocus:this._select,className:k["input-container"],inputClassName:k.input,removeRoundBorder:6,highlightRemoveRoundBorder:6}),d.createElement("div",{ref:function(t){return t&&e._setupClipboard(t)},"data-clipboard-text":t,className:a},d.createElement(S.a,{type:"primary",theme:"ghost"},window.t("Copy")))),d.createElement("div",{className:k.actions},d.createElement("a",{className:k.link,href:t,target:"_blank"},d.createElement(y.a,{icon:T}),d.createElement("span",null,window.t("Save image"))),d.createElement("span",{className:k.socials,onClick:this._shareTwitter},d.createElement(y.a,{className:k.icon,icon:N}),d.createElement("span",{className:k.socialsText},window.t("Tweet"))))))))},t.prototype._setupClipboard=function(e){var t=this;this._copyBtn||(this._copyBtn=e,n.e("clipboard").then(function(o){var r=new(n("sxGJ"))(e);r.on("success",(function(){TradingView.trackEvent("GUI","Copied Image Link"),t.setState({message:window.t("Copied to clipboard")})})),r.on("error",(function(){t.setState({message:window.t("Sorry, the Copy Link button doesn't work in your browser. Please select the link and copy it manually.")})}))}.bind(null,n)).catch(void 0))},t.defaultProps={imageUrl:""},t}(d.Component);function M(e,t,n){var r;function a(e){r||(r=document.createElement("div"),document.body.appendChild(r)),p.render(d.createElement(I,e),r)}function c(){a({isOpened:!1})}void 0===t&&(t={}),Object(l.trackEvent)("GUI","Get image button"),a({isOpened:!1}),s(e,(function(r){n&&n(r);a({isOpened:!0,onClose:c,
imageUrl:i.enabled("charting_library_base")?(t.snapshotUrl?"":"https://www.tradingview.com/x/")+r:Object(o.isProd)()?"https://www.tradingview.com/x/"+r+"/":window.location.protocol+"//"+window.location.host+"/x/"+r+"/",symbol:e.activeChartWidget.value().symbolProperty().value()})}),(function(){a({isOpened:!0,onClose:c,error:window.t("URL cannot be received")})}),{onWidget:e.onWidget,snapshotUrl:t.snapshotUrl,onInvalidSnapshotImage:c}),a({isOpened:!0,onClose:c})}function R(e,t,n){s(e,(function(e){n&&n(e)}),(function(){console.warn(window.t("Error while trying to create snapshot."))}),{snapshotUrl:t.snapshotUrl})}n.d(t,"getImageOfChart",(function(){return M})),n.d(t,"getImageOfChartSilently",(function(){return R}))},jAh7:function(e,t,n){"use strict";n.r(t),n.d(t,"OverlapManager",(function(){return i})),n.d(t,"getRootOverlapManager",(function(){return s}));var o=n("Eyy1"),r=function(){function e(){this._storage=[]}return e.prototype.add=function(e){this._storage.push(e)},e.prototype.remove=function(e){this._storage=this._storage.filter((function(t){return e!==t}))},e.prototype.has=function(e){return this._storage.includes(e)},e.prototype.getItems=function(){return this._storage},e}(),i=function(){function e(e){void 0===e&&(e=document),this._storage=new r,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}return e.prototype.setContainer=function(e){var t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,n),this._container=n},e.prototype.registerWindow=function(e){this._storage.has(e)||this._storage.add(e)},e.prototype.ensureWindow=function(e,t){void 0===t&&(t={position:"fixed",direction:"normal"});var n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);var o=this._document.createElement("div");if(o.style.position=t.position,o.style.zIndex=this._index.toString(),o.dataset.id=e,void 0!==t.index){var r=this._container.childNodes.length;if(t.index>=r)this._container.appendChild(o);else if(t.index<=0)this._container.insertBefore(o,this._container.firstChild);else{var i=this._container.childNodes[t.index];this._container.insertBefore(o,i)}}else"reverse"===t.direction?this._container.insertBefore(o,this._container.firstChild):this._container.appendChild(o);return this._windows.set(e,o),++this._index,o},e.prototype.unregisterWindow=function(e){this._storage.remove(e);var t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))},e.prototype.getZindex=function(e){var t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")},e.prototype.moveToTop=function(e){this.getZindex(e)!==this._index&&(this.ensureWindow(e).style.zIndex=(++this._index).toString())},e.prototype.removeWindow=function(e){this.unregisterWindow(e)},e}(),a=new WeakMap;function s(e){void 0===e&&(e=document);var t=e.getElementById("overlap-manager-root");if(null!==t)return Object(o.ensureDefined)(a.get(t))
;var n=new i(e),r=function(e){var t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t}(e);return a.set(r,n),n.setContainer(r),e.body.appendChild(r),n}},jPOK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("q1tI"),r=n("TSYQ"),i=n("Owlf");n("SzKR");function a(e){var t=r("tv-spinner","tv-spinner--shown","tv-spinner--size_"+(e.size||i.a));return o.createElement("div",{className:t,style:e.style,role:"progressbar"},o.createElement("div",{className:"tv-spinner__spinner-layer"},o.createElement("div",{className:"tv-spinner__background tv-spinner__width_element"}),o.createElement("div",{className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"}),o.createElement("div",{className:"tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"})))}},oj21:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("mrSG"),r=n("q1tI"),i=n("TSYQ"),a=n("qsaw"),s=n("6KyJ");function c(e){var t,n=e.active,c=void 0===n||n,l=e.children,d=e.className,p=void 0===d?"":d,u=e.disabled,h=void 0!==u&&u,m=e.grouped,g=void 0!==m&&m,v=e.growable,f=void 0!==v&&v,w=e.onClick,_=e.reference,y=e.size,b=e.theme,S=e.type,E=void 0===S?"default":S,C=e.loading,O=void 0!==C&&C,x=e.withPadding,U=void 0===x||x,k=e.title,N=void 0===k?"":k,T=e.disabledClassName,I=e.tabIndex,M=void 0===I?0:I,R=e.target,B=void 0===R?"":R,W=e.href,j=void 0===W?"":W,P=e.rounded,D=void 0!==P&&P,A=e.name,F=i(((t={})[p]=Boolean(p),t[a.button]=!0,t[a.active]=c&&!h,t[T||a.disabled]=h,t[a.grouped]=g,t[a.growable]=f,t[a.withPadding]=U,t[function(e){switch(e){case"xsmall":return a.xsmall;case"small":return a.small;case"large":return a.large;default:return""}}(y)]=Boolean(y),t[function(e){switch(e){case"ghost":return a.ghost;default:return""}}(b)]=Boolean(b),t[function(e){switch(e){case"default":return a.base;case"primary":return a.primary;case"secondary":return a.secondary;case"secondary-script":return a.secondaryScript;case"success":return a.success;case"warning":return a.warning;case"danger":return a.danger;case"link":return a.link;default:return""}}(E)]=!0,t[a.rounded]=D,t)),G="default"===E?"black":"white",z={disabled:h,title:N,target:B,href:j};return r.createElement("button",Object(o.a)({name:A,className:F,tabIndex:M,onClick:O?void 0:w,ref:_},z),r.createElement("span",{className:a.hiddenText},l),O?r.createElement("span",{className:a.loader},r.createElement(s.a,{color:G})):r.createElement("span",{className:a.text},l))}},qsaw:function(e,t,n){e.exports={ghost:"ghost-oST7Udg3",primary:"primary-oST7Udg3",success:"success-oST7Udg3",danger:"danger-oST7Udg3",warning:"warning-oST7Udg3",secondary:"secondary-oST7Udg3",button:"button-oST7Udg3",withPadding:"withPadding-oST7Udg3",hiddenText:"hiddenText-oST7Udg3",text:"text-oST7Udg3",loader:"loader-oST7Udg3",base:"base-oST7Udg3",secondaryScript:"secondaryScript-oST7Udg3",link:"link-oST7Udg3",xsmall:"xsmall-oST7Udg3",rounded:"rounded-oST7Udg3",
small:"small-oST7Udg3",large:"large-oST7Udg3",grouped:"grouped-oST7Udg3",growable:"growable-oST7Udg3",active:"active-oST7Udg3",disabled:"disabled-oST7Udg3"}},uqKQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),r=n("q1tI"),i=n("AiMB");function a(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(n,t),n.prototype.render=function(){var t=this.props,n=t.isOpened,a=t.root;if(!n)return null;var s=r.createElement(e,Object(o.a)({},this.props,{zIndex:150}));return"parent"===a?s:r.createElement(i.a,null,s)},n}(r.PureComponent)}}}]);